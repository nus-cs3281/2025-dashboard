[{"path":"src/main/java/teammates/storage/sqlentity/UsageStatistics.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlentity;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.ArrayList;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Objects;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"import jakarta.persistence.Column;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"import jakarta.persistence.Entity;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"import jakarta.persistence.Id;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"import jakarta.persistence.Table;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":" * Represents a system usage statistics for a specified period of time.","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":" *","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":" * \u003cp\u003eNote that \"system usage\" here is defined as user-facing usages, such as number of entities created","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":" * and number of actions, as opposed to system resources such as hardware and network.","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"@Entity","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"@Table(name \u003d \"UsageStatistics\")","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"public class UsageStatistics extends BaseEntity {","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Id","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private UUID id;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    private Instant startTime;","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"    private int timePeriod;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"    private int numResponses;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    private int numCourses;","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    private int numStudents;","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private int numInstructors;","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"    private int numAccountRequests;","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private int numEmails;","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"    private int numSubmissions;","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"    protected UsageStatistics() {","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"        // required by Hibernate","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"    public UsageStatistics(","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"            Instant startTime, int timePeriod, int numResponses, int numCourses,","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"            int numStudents, int numInstructors, int numAccountRequests, int numEmails, int numSubmissions) {","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"        this.startTime \u003d startTime;","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"        this.timePeriod \u003d timePeriod;","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        this.numResponses \u003d numResponses;","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"        this.numCourses \u003d numCourses;","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"        this.numStudents \u003d numStudents;","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"        this.numInstructors \u003d numInstructors;","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"        this.numAccountRequests \u003d numAccountRequests;","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"        this.numEmails \u003d numEmails;","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"        this.numSubmissions \u003d numSubmissions;","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"    public UUID getId() {","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"        return id;","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"    public void setId(UUID id) {","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"        this.id \u003d id;","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public Instant getStartTime() {","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"        return startTime;","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"    public int getTimePeriod() {","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"        return timePeriod;","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"    public int getNumResponses() {","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"        return numResponses;","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public int getNumCourses() {","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"        return numCourses;","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"    public int getNumStudents() {","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"        return numStudents;","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"    public int getNumInstructors() {","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"        return numInstructors;","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"    public int getNumAccountRequests() {","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"        return numAccountRequests;","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"    public int getNumEmails() {","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"        return numEmails;","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"    public int getNumSubmissions() {","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"        return numSubmissions;","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"InfinityTwo"},"content":"    /**","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"InfinityTwo"},"content":"     * Gets the {@link UsageStatistics} instance of","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"InfinityTwo"},"content":"     * the given {@link teammates.common.datatransfer.attributes.UsageStatisticsAttributes}.","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"InfinityTwo"},"content":"     */","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"InfinityTwo"},"content":"    public static UsageStatistics valueOf(teammates.common.datatransfer.attributes.UsageStatisticsAttributes us) {","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"InfinityTwo"},"content":"        return new UsageStatistics(","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"InfinityTwo"},"content":"                us.getStartTime(),","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"InfinityTwo"},"content":"                us.getTimePeriod(),","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"InfinityTwo"},"content":"                us.getNumResponses(),","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"InfinityTwo"},"content":"                us.getNumCourses(),","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"InfinityTwo"},"content":"                us.getNumStudents(),","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"InfinityTwo"},"content":"                us.getNumInstructors(),","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"InfinityTwo"},"content":"                us.getNumAccountRequests(),","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"InfinityTwo"},"content":"                us.getNumEmails(),","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"InfinityTwo"},"content":"                us.getNumSubmissions());","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"    public boolean equals(Object other) {","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"        if (other \u003d\u003d null) {","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"        } else if (this \u003d\u003d other) {","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"            return true;","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"            UsageStatistics otherUsageStatistics \u003d (UsageStatistics) other;","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherUsageStatistics.getId());","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"        } else {","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"    public int hashCode() {","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"        return this.getId().hashCode();","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getInvalidityInfo() {","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"        return new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":17,"-":139}},{"path":"src/main/java/teammates/ui/request/NotificationBasicRequest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.request;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationStyle;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationTargetUser;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":" * The basic request for a notification.","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"public class NotificationBasicRequest extends BasicRequest {","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"    private long startTimestamp;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"    private long endTimestamp;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"    private NotificationStyle style;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"    private NotificationTargetUser targetUser;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"    private String title;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"    private String message;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"    public long getStartTimestamp() {","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"        return this.startTimestamp;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"    public long getEndTimestamp() {","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"        return this.endTimestamp;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"    public NotificationStyle getStyle() {","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"        return this.style;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    public NotificationTargetUser getTargetUser() {","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"        return this.targetUser;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"    public String getTitle() {","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"        return this.title;","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    public String getMessage() {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        return this.message;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    public void setStartTimestamp(long startTimestamp) {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"        this.startTimestamp \u003d startTimestamp;","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"    public void setEndTimestamp(long endTimestamp) {","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"        this.endTimestamp \u003d endTimestamp;","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"    public void setStyle(NotificationStyle style) {","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"        this.style \u003d style;","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"    public void setTargetUser(NotificationTargetUser targetUser) {","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"        this.targetUser \u003d targetUser;","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"    public void setTitle(String title) {","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"        this.title \u003d title;","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    public void setMessage(String message) {","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"        this.message \u003d message;","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"    public void validate() throws InvalidHttpRequestBodyException {","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"        assertTrue(startTimestamp \u003e 0L, \"Start timestamp should be greater than zero\");","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"        assertTrue(endTimestamp \u003e 0L, \"End timestamp should be greater than zero\");","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"        assertTrue(style !\u003d null, \"Notification style cannot be null\");","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"        assertTrue(targetUser !\u003d null, \"Notification target user cannot be null\");","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"        assertTrue(title !\u003d null, \"Notification title cannot be null\");","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"        assertTrue(!title.trim().isEmpty(), \"Notification title cannot be empty\");","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"        assertTrue(message !\u003d null, \"Notification message cannot be null\");","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":1,"-":74}},{"path":"src/main/java/teammates/ui/webapi/DeleteAccountAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":" * Action: deletes an existing account (either student or instructor).","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"mingyang143"},"content":"public class DeleteAccountAction extends AdminOnlyAction {","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"    public JsonResult execute() {","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"        String googleId \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_ID);","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"        // deleteAccountCascade is needed for datastore for dual DB","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"        // as it deletes the student and instructor entities which are not yet migrated","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"        logic.deleteAccountCascade(googleId);","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"        sqlLogic.deleteAccountCascade(googleId);","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"        return new JsonResult(\"Account is successfully deleted.\");","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"mingyang143":1,"-":21}},{"path":"src/main/java/teammates/ui/webapi/DeleteAccountRequestAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.AccountRequest;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":" * Deletes an existing account request.","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"peasantbird"},"content":"public class DeleteAccountRequestAction extends AdminOnlyAction {","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidOperationException {","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"        UUID id \u003d getUuidRequestParamValue(Const.ParamsNames.ACCOUNT_REQUEST_ID);","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"        AccountRequest toDelete \u003d sqlLogic.getAccountRequest(id);","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"        if (toDelete !\u003d null \u0026\u0026 toDelete.getRegisteredAt() !\u003d null) {","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"            // instructor is already registered and cannot be deleted","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"            throw new InvalidOperationException(\"Account request of a registered instructor cannot be deleted.\");","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"        sqlLogic.deleteAccountRequest(id);","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"        return new JsonResult(\"Account request successfully deleted.\");","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"peasantbird":1,"-":28}},{"path":"src/main/java/teammates/ui/webapi/GetAccountAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountData;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":" * Gets account\u0027s information.","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"mingyang143"},"content":"public class GetAccountAction extends AdminOnlyAction {","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"    public JsonResult execute() {","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"        String googleId \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_ID);","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"        Account account \u003d sqlLogic.getAccountForGoogleId(googleId);","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"        if (account \u003d\u003d null) {","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(\"Account does not exist.\");","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"        AccountData output \u003d new AccountData(account);","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"        return new JsonResult(output);","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"mingyang143":1,"-":25}},{"path":"src/main/java/teammates/ui/webapi/GetAccountsAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.SanitizationHelper;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountData;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountsData;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":" * Gets all accounts with the given email.","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"mingyang143"},"content":"public class GetAccountsAction extends AdminOnlyAction {","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    public JsonResult execute() {","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"        String email \u003d getNonNullRequestParamValue(Const.ParamsNames.USER_EMAIL);","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"        email \u003d SanitizationHelper.sanitizeEmail(email);","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"        List\u003cAccountAttributes\u003e premigratedAccounts \u003d logic.getAccountsForEmail(email);","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"        List\u003cAccount\u003e migratedAccounts \u003d sqlLogic.getAccountsForEmail(email);","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"        List\u003cAccountData\u003e accounts \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"        for (AccountAttributes accountAttribute : premigratedAccounts) {","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"            accounts.add(new AccountData(accountAttribute));","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"        for (Account account : migratedAccounts) {","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"            accounts.add(new AccountData(account));","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"        return new JsonResult(new AccountsData(accounts));","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"mingyang143":1,"-":37}},{"path":"src/main/java/teammates/ui/webapi/GetTimeZonesAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.time.ZoneId;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.time.zone.ZoneRulesProvider;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Map;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.TreeMap;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.TimeZonesData;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":" * Action: get supported time zones.","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"public class GetTimeZonesAction extends Action {","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"        if (!userInfo.isMaintainer \u0026\u0026 !userInfo.isAdmin) {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Only Maintainers or Admin are allowed to access this resource.\");","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    public JsonResult execute() {","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"        String tzVersion \u003d ZoneRulesProvider.getVersions(\"UTC\").firstKey();","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"        Instant now \u003d Instant.now();","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"        Map\u003cString, Integer\u003e tzOffsets \u003d new TreeMap\u003c\u003e();","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"        for (String tz : ZoneId.getAvailableZoneIds()) {","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"            if (!tz.contains(\"SystemV\")) {","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"                int offset \u003d ZoneId.of(tz).getRules().getOffset(now).getTotalSeconds();","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"                tzOffsets.put(tz, offset);","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"        TimeZonesData output \u003d new TimeZonesData(tzVersion, tzOffsets);","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"        return new JsonResult(output);","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":1,"-":41}},{"path":"src/main/java/teammates/ui/webapi/GetUsageStatisticsAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Duration;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.UsageStatistics;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.UsageStatisticsRangeData;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":" * Gets usage statistics for a specified time period.","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"public class GetUsageStatisticsAction extends Action {","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    private static final Duration MAX_SEARCH_WINDOW \u003d Duration.ofDays(184L); // covering six whole months","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"        if (!userInfo.isMaintainer \u0026\u0026 !userInfo.isAdmin) {","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Only Maintainers or Admin are allowed to access this resource.\");","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"    @Override","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"    public JsonResult execute() {","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"        String startTimeString \u003d getNonNullRequestParamValue(Const.ParamsNames.QUERY_LOGS_STARTTIME);","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"        long startTime;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"        try {","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"            startTime \u003d Long.parseLong(startTimeString);","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"        } catch (NumberFormatException e) {","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"Invalid startTime parameter\", e);","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"        String endTimeString \u003d getNonNullRequestParamValue(Const.ParamsNames.QUERY_LOGS_ENDTIME);","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"        long endTime;","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"        try {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"            endTime \u003d Long.parseLong(endTimeString);","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"        } catch (NumberFormatException e) {","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"Invalid endTime parameter\", e);","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        if (startTime \u003e\u003d endTime) {","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"The end time should be after the start time.\");","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"        if (endTime \u003e Instant.now().toEpochMilli()) {","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"The end time must not exceed the current time.\");","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"        if (endTime - startTime \u003e MAX_SEARCH_WINDOW.toMillis()) {","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"The search window must not exceed \"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"                    + MAX_SEARCH_WINDOW.toDays() + \" full days.\");","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"        List\u003cUsageStatistics\u003e usageStatisticsInRange \u003d","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"                sqlLogic.getUsageStatisticsForTimeRange(Instant.ofEpochMilli(startTime), Instant.ofEpochMilli(endTime));","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        UsageStatisticsRangeData output \u003d new UsageStatisticsRangeData(usageStatisticsInRange);","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"        return new JsonResult(output);","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":1,"-":66}},{"path":"src/test/java/teammates/sqlui/webapi/CalculateUsageStatisticsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.ArgumentMatchers.isA;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"import java.time.temporal.ChronoUnit;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.datatransfer.attributes.UsageStatisticsAttributes;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.TimeHelper;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.UsageStatistics;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.CalculateUsageStatisticsAction;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link CalculateUsageStatisticsAction}.","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":"public class CalculateUsageStatisticsActionTest extends BaseActionTest\u003cCalculateUsageStatisticsAction\u003e {","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":"    private final Instant startTime \u003d","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":"            TimeHelper.getInstantNearestHourBefore(Instant.now()).minus(1, ChronoUnit.HOURS);","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"    private final UsageStatistics testUsageStatistics \u003d","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":"            getTypicalUsageStatistics(startTime);","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":"    private final UsageStatisticsAttributes testUsageStatisticsAttributes \u003d","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"            getTypicalUsageStatisticsAttributes(startTime);","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"    private final int collectionTimePeriod \u003d testUsageStatistics.getTimePeriod();","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"        return Const.CronJobURIs.AUTOMATED_USAGE_STATISTICS_COLLECTION;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"        return GET;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_maintainers_cannotAccess() {","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"        loginAsMaintainer();","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_instructor_cannotAccess() {","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(Const.ParamsNames.INSTRUCTOR_ID);","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"InfinityTwo"},"content":"        loginAsStudent(Const.ParamsNames.STUDENT_ID);","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_unregistered_cannotAccess() {","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"InfinityTwo"},"content":"        loginAsUnregistered(Const.ParamsNames.USER_ID);","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"InfinityTwo"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"InfinityTwo"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"InfinityTwo"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"InfinityTwo"},"content":"    public void testExecute_normalCase_shouldSucceed() {","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.calculateEntitiesStatisticsForTimeRange(isA(Instant.class), isA(Instant.class)))","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"InfinityTwo"},"content":"                .thenReturn(testUsageStatistics);","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"InfinityTwo"},"content":"        when(mockDatastoreLogic.calculateEntitiesStatisticsForTimeRange(isA(Instant.class), isA(Instant.class)))","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"InfinityTwo"},"content":"                .thenReturn(testUsageStatisticsAttributes);","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getUsageStatisticsForTimeRange(isA(Instant.class), isA(Instant.class)))","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"InfinityTwo"},"content":"                .thenReturn(List.of(testUsageStatistics));","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"InfinityTwo"},"content":"        CalculateUsageStatisticsAction action \u003d getAction();","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"InfinityTwo"},"content":"        action.execute();","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cUsageStatistics\u003e statsObjects \u003d mockLogic.getUsageStatisticsForTimeRange(","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"InfinityTwo"},"content":"                TimeHelper.getInstantDaysOffsetBeforeNow(1L),","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"InfinityTwo"},"content":"                TimeHelper.getInstantDaysOffsetFromNow(1L));","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"InfinityTwo"},"content":"        // Only check that there is a stats object created.","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"InfinityTwo"},"content":"        // Everything else is not predictable.","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(1, statsObjects.size());","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"InfinityTwo"},"content":"        UsageStatistics statsObject \u003d statsObjects.get(0);","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(collectionTimePeriod, statsObject.getTimePeriod());","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"InfinityTwo"},"content":"        // Note that there is a slim possibility that this assertion may fail, if the hour has changed","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"InfinityTwo"},"content":"        // between when the stats was gathered and the line where Instant.now is called.","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"InfinityTwo"},"content":"        // However, as the execution happens in milliseconds precision, the risk is too small to justify","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"InfinityTwo"},"content":"        // the additional code needed to handle this case.","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"InfinityTwo"},"content":"        Instant pastHour \u003d TimeHelper.getInstantNearestHourBefore(Instant.now()).minus(1, ChronoUnit.HOURS);","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(pastHour, statsObject.getStartTime());","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":116}},{"path":"src/test/java/teammates/sqlui/webapi/CreateFeedbackQuestionActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BunnyHoppp"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"BunnyHoppp"},"content":"import static org.mockito.ArgumentMatchers.any;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"BunnyHoppp"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"BunnyHoppp"},"content":"import static teammates.common.util.Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_OBSERVER;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"BunnyHoppp"},"content":"import java.util.ArrayList;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"BunnyHoppp"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"BunnyHoppp"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.questions.FeedbackContributionQuestionDetails;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.FeedbackSession;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.output.FeedbackQuestionData;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.output.NumberOfEntitiesToGiveFeedbackToSetting;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.request.FeedbackQuestionCreateRequest;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.webapi.CreateFeedbackQuestionAction;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.webapi.JsonResult;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"BunnyHoppp"},"content":"/**","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"BunnyHoppp"},"content":" * SUT: {@link CreateFeedbackQuestionAction}.","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"BunnyHoppp"},"content":" */","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"BunnyHoppp"},"content":"public class CreateFeedbackQuestionActionTest extends BaseActionTest\u003cCreateFeedbackQuestionAction\u003e {","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"BunnyHoppp"},"content":"    private Instructor typicalInstructor;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"BunnyHoppp"},"content":"    private Course typicalCourse;","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"BunnyHoppp"},"content":"    private FeedbackSession typicalFeedbackSession;","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"BunnyHoppp"},"content":"    @Override","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"BunnyHoppp"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"BunnyHoppp"},"content":"        return Const.ResourceURIs.QUESTION;","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"BunnyHoppp"},"content":"    @Override","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"BunnyHoppp"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"BunnyHoppp"},"content":"        return POST;","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"BunnyHoppp"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"BunnyHoppp"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"BunnyHoppp"},"content":"        typicalInstructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"BunnyHoppp"},"content":"        typicalCourse \u003d typicalInstructor.getCourse();","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"BunnyHoppp"},"content":"        typicalFeedbackSession \u003d getTypicalFeedbackSessionForCourse(typicalCourse);","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_typicalCase_success() throws Exception {","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestion createdQuestion \u003d getCreatedFeedbackQuestion();","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackSession.getName(), typicalCourse.getId()))","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.createFeedbackQuestion(any(FeedbackQuestion.class))).thenReturn(createdQuestion);","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d getTypicalTextQuestionCreateRequest();","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"BunnyHoppp"},"content":"        CreateFeedbackQuestionAction a \u003d getAction(createRequest, params);","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"BunnyHoppp"},"content":"        JsonResult r \u003d getJsonResult(a);","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionData response \u003d (FeedbackQuestionData) r.getOutput();","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getQuestionNumber(), createdQuestion.getQuestionNumber().intValue());","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getQuestionNumber(), 2);","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getQuestionDescription(), \"this is the description\");","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getQuestionDescription(), createdQuestion.getDescription());","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getQuestionBrief(), \"this is the brief\");","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getQuestionBrief(), createdQuestion.getQuestionDetailsCopy().getQuestionText());","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getQuestionType(), FeedbackQuestionType.TEXT);","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getQuestionType(), createdQuestion.getQuestionDetailsCopy().getQuestionType());","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getGiverType(), FeedbackParticipantType.STUDENTS);","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getGiverType(), createdQuestion.getGiverType());","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getRecipientType(), FeedbackParticipantType.INSTRUCTORS);","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getRecipientType(), createdQuestion.getRecipientType());","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(response.getNumberOfEntitiesToGiveFeedbackToSetting(),","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"BunnyHoppp"},"content":"                NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED);","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(response.getShowResponsesTo().isEmpty());","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(createdQuestion.getShowResponsesTo().isEmpty());","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(response.getShowGiverNameTo().isEmpty());","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(createdQuestion.getShowGiverNameTo().isEmpty());","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(response.getShowRecipientNameTo().isEmpty());","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(createdQuestion.getShowRecipientNameTo().isEmpty());","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_missingParameters_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpParameterFailure();","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_missingCourseId_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_missingFeedbackSessionName_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_nullQuestionType_throwsInvalidHttpRequestBodyException() {","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d getTypicalTextQuestionCreateRequest();","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionType(null);","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_invalidQuestionNumber_throwsInvalidHttpRequestBodyException() {","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d getTypicalTextQuestionCreateRequest();","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionNumber(-1);","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_invalidGiverType_throwsInvalidHttpRequestBodyException() {","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackSession.getName(), typicalCourse.getId()))","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d getTypicalTextQuestionCreateRequest();","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionType(FeedbackQuestionType.CONTRIB);","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionDetails(new FeedbackContributionQuestionDetails());","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setGiverType(FeedbackParticipantType.NONE);","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_invalidRecommendedLength_throwsInvalidHttpRequestBodyException() {","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackSession.getName(), typicalCourse.getId()))","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d getTypicalTextQuestionCreateRequest();","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackTextQuestionDetails textQuestionDetails \u003d new FeedbackTextQuestionDetails();","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"BunnyHoppp"},"content":"        textQuestionDetails.setRecommendedLength(-1);","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionDetails(textQuestionDetails);","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_emptyQuestionBrief_throwsInvalidHttpRequestBodyException() {","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d getTypicalTextQuestionCreateRequest();","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionBrief(\"\");","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_nonExistentFeedbackSession_throwsEntityNotFoundException() {","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackSession.getName(), typicalCourse.getId())).thenReturn(null);","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(typicalInstructor.getGoogleId());","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"BunnyHoppp"},"content":"        verifyEntityNotFoundAcl(params);","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"BunnyHoppp"},"content":"    void testSpecificAccessControl_withModifySessionPrivilege_canAccess() {","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackSession.getName(), typicalCourse.getId()))","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getInstructorByGoogleId(typicalCourse.getId(), typicalInstructor.getGoogleId()))","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(typicalInstructor);","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCanAccess(params);","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"BunnyHoppp"},"content":"    void testSpecificAccessControl_withoutModifySessionPrivilege_cannotAccess() {","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"BunnyHoppp"},"content":"        // create instructor without modify session privilege","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"BunnyHoppp"},"content":"        Instructor instructorWithoutAccess \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"BunnyHoppp"},"content":"        instructorWithoutAccess.setPrivileges(new InstructorPrivileges(INSTRUCTOR_PERMISSION_ROLE_OBSERVER));","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackSession.getName(), typicalCourse.getId()))","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getInstructorByGoogleId(typicalCourse.getId(), typicalInstructor.getGoogleId()))","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(instructorWithoutAccess);","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, typicalFeedbackSession.getName(),","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(instructorWithoutAccess.getGoogleId());","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"BunnyHoppp"},"content":"    private FeedbackQuestionCreateRequest getTypicalTextQuestionCreateRequest() {","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d new FeedbackQuestionCreateRequest();","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionNumber(2);","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionBrief(\"this is the brief\");","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionDescription(\"this is the description\");","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackTextQuestionDetails textQuestionDetails \u003d new FeedbackTextQuestionDetails();","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"BunnyHoppp"},"content":"        textQuestionDetails.setRecommendedLength(800);","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionDetails(textQuestionDetails);","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setQuestionType(FeedbackQuestionType.TEXT);","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setGiverType(FeedbackParticipantType.STUDENTS);","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setRecipientType(FeedbackParticipantType.INSTRUCTORS);","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setNumberOfEntitiesToGiveFeedbackToSetting(NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED);","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setShowResponsesTo(new ArrayList\u003c\u003e());","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setShowGiverNameTo(new ArrayList\u003c\u003e());","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"BunnyHoppp"},"content":"        createRequest.setShowRecipientNameTo(new ArrayList\u003c\u003e());","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"BunnyHoppp"},"content":"        return createRequest;","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"BunnyHoppp"},"content":"    private FeedbackQuestion getCreatedFeedbackQuestion() {","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackTextQuestionDetails textQuestionDetails \u003d","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"BunnyHoppp"},"content":"                new FeedbackTextQuestionDetails(\"this is the brief\");","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"BunnyHoppp"},"content":"        textQuestionDetails.setRecommendedLength(800);","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"BunnyHoppp"},"content":"        return FeedbackQuestion.makeQuestion(typicalFeedbackSession, 2,","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"BunnyHoppp"},"content":"                \"this is the description\", FeedbackParticipantType.STUDENTS,","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"BunnyHoppp"},"content":"                FeedbackParticipantType.INSTRUCTORS, Const.MAX_POSSIBLE_RECIPIENTS, new ArrayList\u003c\u003e(),","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"BunnyHoppp"},"content":"                new ArrayList\u003c\u003e(), new ArrayList\u003c\u003e(), textQuestionDetails);","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"BunnyHoppp"},"content":"}","isFullCredit":false}],"authorContributionMap":{"BunnyHoppp":280}},{"path":"src/test/java/teammates/sqlui/webapi/CreateNotificationActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.ArgumentMatchers.any;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.ArgumentMatchers.isA;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.datatransfer.NotificationStyle;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.datatransfer.NotificationTargetUser;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.exception.InvalidParametersException;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.Notification;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.output.NotificationData;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.request.NotificationCreateRequest;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.CreateNotificationAction;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link CreateNotificationAction}.","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"public class CreateNotificationActionTest extends BaseActionTest\u003cCreateNotificationAction\u003e {","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":"    private static final String GOOGLE_ID \u003d \"user-googleId\";","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":"    private static final String INVALID_TITLE \u003d \"\";","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"    NotificationCreateRequest testReq;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"    private Notification testNotification;","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"        return Const.ResourceURIs.NOTIFICATION;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"        return POST;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"        testNotification \u003d getTypicalNotificationWithId();","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_addNotification_success() throws Exception {","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"        long startTime \u003d testNotification.getStartTime().toEpochMilli();","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"        long endTime \u003d testNotification.getEndTime().toEpochMilli();","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"        NotificationStyle style \u003d testNotification.getStyle();","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"        NotificationTargetUser targetUser \u003d testNotification.getTargetUser();","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"        String title \u003d testNotification.getTitle();","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"        String message \u003d testNotification.getMessage();","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.createNotification(isA(Notification.class))).thenAnswer(invocation -\u003e invocation.getArgument(0));","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"        NotificationCreateRequest req \u003d getTypicalCreateRequest();","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"        CreateNotificationAction action \u003d getAction(req);","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"        NotificationData res \u003d (NotificationData) action.execute().getOutput();","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getNotification(UUID.fromString(res.getNotificationId()))).thenReturn(testNotification);","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"InfinityTwo"},"content":"        Notification createdNotification \u003d mockLogic.getNotification(UUID.fromString(res.getNotificationId()));","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"InfinityTwo"},"content":"        // check that notification returned has same properties as notification created","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(createdNotification.getStartTime().toEpochMilli(), res.getStartTimestamp());","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(createdNotification.getEndTime().toEpochMilli(), res.getEndTimestamp());","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(createdNotification.getStyle(), res.getStyle());","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(createdNotification.getTargetUser(), res.getTargetUser());","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(createdNotification.getTitle(), res.getTitle());","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(createdNotification.getMessage(), res.getMessage());","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"InfinityTwo"},"content":"        // check DB correctly processed request","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(startTime, createdNotification.getStartTime().toEpochMilli());","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(endTime, createdNotification.getEndTime().toEpochMilli());","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(style, createdNotification.getStyle());","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(targetUser, createdNotification.getTargetUser());","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(title, createdNotification.getTitle());","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(message, createdNotification.getMessage());","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"InfinityTwo"},"content":"    void testSpecificAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"InfinityTwo"},"content":"    void testSpecificAccessControl_instructor_cannotAccess() {","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"InfinityTwo"},"content":"    void testSpecificAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"InfinityTwo"},"content":"        loginAsStudent(GOOGLE_ID);","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"InfinityTwo"},"content":"    void testSpecificAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_invalidStyle_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"InfinityTwo"},"content":"        testReq \u003d getTypicalCreateRequest();","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"InfinityTwo"},"content":"        testReq.setStyle(null);","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(testReq);","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification style cannot be null\", ex.getMessage());","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_invalidTargetUser_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"InfinityTwo"},"content":"        testReq \u003d getTypicalCreateRequest();","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"InfinityTwo"},"content":"        testReq.setTargetUser(null);","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(testReq);","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification target user cannot be null\", ex.getMessage());","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_invalidTitle_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"InfinityTwo"},"content":"        testReq \u003d getTypicalCreateRequest();","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"InfinityTwo"},"content":"        testReq.setTitle(null);","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(testReq);","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification title cannot be null\", ex.getMessage());","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_invalidMessage_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"InfinityTwo"},"content":"        testReq \u003d getTypicalCreateRequest();","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"InfinityTwo"},"content":"        testReq.setMessage(null);","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(testReq);","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification message cannot be null\", ex.getMessage());","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_negativeStartTimestamp_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"InfinityTwo"},"content":"        testReq \u003d getTypicalCreateRequest();","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"InfinityTwo"},"content":"        testReq.setStartTimestamp(-1);","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(testReq);","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Start timestamp should be greater than zero\", ex.getMessage());","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_negativeEndTimestamp_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"InfinityTwo"},"content":"        testReq \u003d getTypicalCreateRequest();","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"InfinityTwo"},"content":"        testReq.setEndTimestamp(-1);","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(testReq);","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"End timestamp should be greater than zero\", ex.getMessage());","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_invalidParameter_throwsInvalidHttpParameterException() throws Exception {","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"InfinityTwo"},"content":"        testReq \u003d getTypicalCreateRequest();","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"InfinityTwo"},"content":"        testReq.setTitle(INVALID_TITLE);","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.createNotification(any())).thenThrow(new InvalidParametersException(\"Invalid title\"));","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(testReq);","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification title cannot be empty\", ex.getMessage());","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"InfinityTwo"},"content":"    private NotificationCreateRequest getTypicalCreateRequest() {","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"InfinityTwo"},"content":"        NotificationCreateRequest req \u003d new NotificationCreateRequest();","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"InfinityTwo"},"content":"        req.setStartTimestamp(testNotification.getStartTime().toEpochMilli());","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"InfinityTwo"},"content":"        req.setEndTimestamp(testNotification.getEndTime().toEpochMilli());","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"InfinityTwo"},"content":"        req.setStyle(testNotification.getStyle());","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"InfinityTwo"},"content":"        req.setTargetUser(testNotification.getTargetUser());","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"InfinityTwo"},"content":"        req.setTitle(testNotification.getTitle());","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"InfinityTwo"},"content":"        req.setMessage(testNotification.getMessage());","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"InfinityTwo"},"content":"        return req;","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":192}},{"path":"src/test/java/teammates/sqlui/webapi/DeleteAccountActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"mingyang143"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.times;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.verify;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"mingyang143"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"mingyang143"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"mingyang143"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Account;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.output.MessageOutput;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.webapi.DeleteAccountAction;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"mingyang143"},"content":"/**","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"mingyang143"},"content":" * SUT: {@link DeleteAccountAction}.","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"mingyang143"},"content":" */","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"mingyang143"},"content":"public class DeleteAccountActionTest extends BaseActionTest\u003cDeleteAccountAction\u003e {","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"mingyang143"},"content":"    String googleId \u003d \"user-googleId\";","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"mingyang143"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"mingyang143"},"content":"        return Const.ResourceURIs.ACCOUNT;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"mingyang143"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"mingyang143"},"content":"        return DELETE;","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"mingyang143"},"content":"    protected void textExecute_nullParams_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, null,","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"mingyang143"},"content":"    protected void testExecute_nonNullParams_success() {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"mingyang143"},"content":"        Course stubCourse \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"mingyang143"},"content":"        Account stubAccount \u003d new Account(googleId, \"name\", \"instructoremail@tm.tmt\");","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d new Instructor(stubCourse, \"name\", \"instructoremail@tm.tmt\",","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"mingyang143"},"content":"                false, \"\", null, new InstructorPrivileges());","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"mingyang143"},"content":"        instructor.setAccount(stubAccount);","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"mingyang143"},"content":"        DeleteAccountAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"mingyang143"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"mingyang143"},"content":"        assertEquals(\"Account is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"mingyang143"},"content":"        verify(mockLogic, times(1)).deleteAccountCascade(googleId);","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"mingyang143"},"content":"}","isFullCredit":false}],"authorContributionMap":{"mingyang143":55}},{"path":"src/test/java/teammates/sqlui/webapi/DeleteAccountRequestActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"peasantbird"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"peasantbird"},"content":"import static org.mockito.Mockito.times;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"peasantbird"},"content":"import static org.mockito.Mockito.verify;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"peasantbird"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"peasantbird"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"peasantbird"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"peasantbird"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"peasantbird"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"peasantbird"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"peasantbird"},"content":"import teammates.storage.sqlentity.AccountRequest;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"peasantbird"},"content":"import teammates.ui.output.MessageOutput;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"peasantbird"},"content":"import teammates.ui.webapi.DeleteAccountRequestAction;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"peasantbird"},"content":"import teammates.ui.webapi.InvalidOperationException;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"peasantbird"},"content":"/**","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"peasantbird"},"content":" * SUT: {@link DeleteAccountRequestAction}.","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"peasantbird"},"content":" */","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"peasantbird"},"content":"public class DeleteAccountRequestActionTest extends BaseActionTest\u003cDeleteAccountRequestAction\u003e {","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"peasantbird"},"content":"    private AccountRequest accountRequest;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"peasantbird"},"content":"    @Override","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"peasantbird"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"peasantbird"},"content":"        return Const.ResourceURIs.ACCOUNT_REQUEST;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"peasantbird"},"content":"    }","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"peasantbird"},"content":"    @Override","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"peasantbird"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"peasantbird"},"content":"        return DELETE;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"peasantbird"},"content":"    }","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"peasantbird"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"peasantbird"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"peasantbird"},"content":"        accountRequest \u003d getTypicalAccountRequest();","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"peasantbird"},"content":"    }","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"peasantbird"},"content":"    @Test","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"peasantbird"},"content":"    void testExecute_existingAccountRequest_success() {","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"peasantbird"},"content":"        UUID id \u003d accountRequest.getId();","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"peasantbird"},"content":"        when(mockLogic.getAccountRequest(id)).thenReturn(accountRequest);","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"peasantbird"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"peasantbird"},"content":"                Const.ParamsNames.ACCOUNT_REQUEST_ID, id.toString(),","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"peasantbird"},"content":"        };","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"peasantbird"},"content":"        DeleteAccountRequestAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"peasantbird"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"peasantbird"},"content":"        assertEquals(\"Account request successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"peasantbird"},"content":"        verify(mockLogic, times(1)).deleteAccountRequest(id);","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"peasantbird"},"content":"    }","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"peasantbird"},"content":"    @Test","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"peasantbird"},"content":"    void testExecute_registeredInstructor_throwsInvalidOperationException() {","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"peasantbird"},"content":"        accountRequest.setRegisteredAt(Instant.now());","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"peasantbird"},"content":"        UUID id \u003d accountRequest.getId();","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"peasantbird"},"content":"        when(mockLogic.getAccountRequest(id)).thenReturn(accountRequest);","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"peasantbird"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"peasantbird"},"content":"                Const.ParamsNames.ACCOUNT_REQUEST_ID, id.toString(),","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"peasantbird"},"content":"        };","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"peasantbird"},"content":"        InvalidOperationException ex \u003d verifyInvalidOperation(params);","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"peasantbird"},"content":"        assertEquals(\"Account request of a registered instructor cannot be deleted.\", ex.getMessage());","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"peasantbird"},"content":"    }","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"peasantbird"},"content":"    @Test","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"peasantbird"},"content":"    void testExecute_nonExistingAccountRequest_failSilently() {","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"peasantbird"},"content":"        accountRequest \u003d null;","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"peasantbird"},"content":"        UUID id \u003d UUID.fromString(\"11110000-0000-0000-0000-000000000000\");","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"peasantbird"},"content":"        when(mockLogic.getAccountRequest(id)).thenReturn(accountRequest);","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"peasantbird"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"peasantbird"},"content":"                Const.ParamsNames.ACCOUNT_REQUEST_ID, id.toString(),","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"peasantbird"},"content":"        };","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"peasantbird"},"content":"        DeleteAccountRequestAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"peasantbird"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"peasantbird"},"content":"        assertEquals(\"Account request successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"peasantbird"},"content":"    }","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"peasantbird"},"content":"    @Test","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"peasantbird"},"content":"    void testExecute_missingAccountRequestId_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"peasantbird"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"peasantbird"},"content":"                Const.ParamsNames.ACCOUNT_REQUEST_ID, null,","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"peasantbird"},"content":"        };","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"peasantbird"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"peasantbird"},"content":"    }","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"peasantbird"},"content":"    @Test","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"peasantbird"},"content":"    void testSpecificAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"peasantbird"},"content":"        UUID id \u003d accountRequest.getId();","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"peasantbird"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"peasantbird"},"content":"        when(mockLogic.getAccountRequest(id)).thenReturn(accountRequest);","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"peasantbird"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"peasantbird"},"content":"                Const.ParamsNames.ACCOUNT_REQUEST_ID, id.toString(),","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"peasantbird"},"content":"        };","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"peasantbird"},"content":"        verifyCanAccess(params);","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"peasantbird"},"content":"    }","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"peasantbird"},"content":"    @Test","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"peasantbird"},"content":"    void testSpecificAccessControl_notAdmin_cannotAccess() {","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"peasantbird"},"content":"        UUID id \u003d accountRequest.getId();","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"peasantbird"},"content":"        when(mockLogic.getAccountRequest(id)).thenReturn(accountRequest);","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"peasantbird"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"peasantbird"},"content":"                Const.ParamsNames.ACCOUNT_REQUEST_ID, id.toString(),","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"peasantbird"},"content":"        };","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"peasantbird"},"content":"        loginAsUnregistered(\"unregistered\");","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"peasantbird"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"peasantbird"},"content":"        loginAsStudent(\"student\");","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"peasantbird"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"peasantbird"},"content":"        loginAsInstructor(\"instructor\");","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"peasantbird"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"peasantbird"},"content":"","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"peasantbird"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"peasantbird"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"peasantbird"},"content":"    }","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"peasantbird"},"content":"}","isFullCredit":false}],"authorContributionMap":{"peasantbird":135}},{"path":"src/test/java/teammates/sqlui/webapi/DeleteFeedbackQuestionActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BunnyHoppp"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"BunnyHoppp"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"BunnyHoppp"},"content":"import static teammates.common.util.Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_OBSERVER;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"BunnyHoppp"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"BunnyHoppp"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"BunnyHoppp"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.FeedbackSession;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.output.MessageOutput;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.webapi.DeleteFeedbackQuestionAction;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"BunnyHoppp"},"content":"/**","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"BunnyHoppp"},"content":" * SUT: {@link DeleteFeedbackQuestionAction}.","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"BunnyHoppp"},"content":" */","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"BunnyHoppp"},"content":"public class DeleteFeedbackQuestionActionTest extends BaseActionTest\u003cDeleteFeedbackQuestionAction\u003e {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"BunnyHoppp"},"content":"    private Instructor typicalInstructor;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"BunnyHoppp"},"content":"    private Course typicalCourse;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"BunnyHoppp"},"content":"    private FeedbackSession typicalFeedbackSession;","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"BunnyHoppp"},"content":"    private FeedbackQuestion typicalFeedbackQuestion;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"BunnyHoppp"},"content":"    @Override","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"BunnyHoppp"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"BunnyHoppp"},"content":"        return Const.ResourceURIs.QUESTION;","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"BunnyHoppp"},"content":"    @Override","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"BunnyHoppp"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"BunnyHoppp"},"content":"        return DELETE;","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"BunnyHoppp"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"BunnyHoppp"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"BunnyHoppp"},"content":"        typicalInstructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"BunnyHoppp"},"content":"        typicalCourse \u003d typicalInstructor.getCourse();","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"BunnyHoppp"},"content":"        typicalFeedbackSession \u003d getTypicalFeedbackSessionForCourse(typicalCourse);","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"BunnyHoppp"},"content":"        typicalFeedbackQuestion \u003d getTypicalFeedbackQuestionForSession(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_feedbackQuestionExists_success() {","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(typicalFeedbackQuestion);","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"BunnyHoppp"},"content":"        DeleteFeedbackQuestionAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"BunnyHoppp"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(\"Feedback question deleted!\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_feedbackQuestionDoesNotExist_failSilently() {","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"BunnyHoppp"},"content":"        UUID nonexistentQuestionId \u003d UUID.fromString(\"11110000-0000-0000-0000-000000000000\");","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(nonexistentQuestionId)).thenReturn(null);","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, nonexistentQuestionId.toString(),","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"BunnyHoppp"},"content":"        DeleteFeedbackQuestionAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"BunnyHoppp"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(\"Feedback question deleted!\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_missingFeedbackQuestionId_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, null,","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"BunnyHoppp"},"content":"    void testSpecificAccessControl_nonExistentFeedbackQuestion_cannotAccess() {","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(null);","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"BunnyHoppp"},"content":"        String[] submissionParams \u003d {","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(submissionParams);","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"BunnyHoppp"},"content":"    void testSpecificAccessControl_withModifySessionPrivilege_canAccess() {","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(typicalFeedbackQuestion);","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackQuestion.getFeedbackSession().getName(),","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"BunnyHoppp"},"content":"                typicalFeedbackQuestion.getCourseId())).thenReturn(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getInstructorByGoogleId(typicalCourse.getId(), typicalInstructor.getGoogleId()))","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(typicalInstructor);","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"BunnyHoppp"},"content":"        String[] submissionParams \u003d {","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(typicalInstructor.getGoogleId());","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCanAccess(submissionParams);","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"BunnyHoppp"},"content":"    void testSpecificAccessControl_withoutModifySessionPrivilege_cannotAccess() {","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"BunnyHoppp"},"content":"        // create instructor without modify session privilege","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"BunnyHoppp"},"content":"        Instructor instructorWithoutAccess \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"BunnyHoppp"},"content":"        instructorWithoutAccess.setPrivileges(new InstructorPrivileges(INSTRUCTOR_PERMISSION_ROLE_OBSERVER));","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(typicalFeedbackQuestion);","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackQuestion.getFeedbackSession().getName(),","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"BunnyHoppp"},"content":"                typicalFeedbackQuestion.getCourseId())).thenReturn(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getInstructorByGoogleId(typicalCourse.getId(), instructorWithoutAccess.getGoogleId()))","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(instructorWithoutAccess);","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"BunnyHoppp"},"content":"        String[] submissionParams \u003d {","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(instructorWithoutAccess.getGoogleId());","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(submissionParams);","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"BunnyHoppp"},"content":"}","isFullCredit":false}],"authorContributionMap":{"BunnyHoppp":132}},{"path":"src/test/java/teammates/sqlui/webapi/DeleteFeedbackSessionActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"mingyang143"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.times;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.verify;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"mingyang143"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"mingyang143"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"mingyang143"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"mingyang143"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"mingyang143"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.FeedbackSession;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.output.MessageOutput;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.webapi.DeleteFeedbackSessionAction;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"mingyang143"},"content":"/**","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"mingyang143"},"content":" * SUT: {@link DeleteFeedbackSessionAction}.","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"mingyang143"},"content":" */","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"mingyang143"},"content":"public class DeleteFeedbackSessionActionTest extends BaseActionTest\u003cDeleteFeedbackSessionAction\u003e {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"mingyang143"},"content":"    private String googleId \u003d \"user-googleId\";","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"mingyang143"},"content":"    private Course course;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"mingyang143"},"content":"    private FeedbackSession session;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"mingyang143"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"mingyang143"},"content":"        return Const.ResourceURIs.SESSION;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"mingyang143"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"mingyang143"},"content":"        return DELETE;","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"mingyang143"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"mingyang143"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"mingyang143"},"content":"        course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"mingyang143"},"content":"        session \u003d new FeedbackSession(","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"mingyang143"},"content":"                \"session-name\",","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"mingyang143"},"content":"                course,","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"mingyang143"},"content":"                \"creater_email@tm.tmt\",","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"mingyang143"},"content":"                null,","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"mingyang143"},"content":"                Instant.parse(\"2020-01-01T00:00:00.000Z\"),","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"mingyang143"},"content":"                Instant.parse(\"2020-10-01T00:00:00.000Z\"),","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"mingyang143"},"content":"                Instant.parse(\"2020-01-01T00:00:00.000Z\"),","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"mingyang143"},"content":"                Instant.parse(\"2020-11-01T00:00:00.000Z\"),","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"mingyang143"},"content":"                null,","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"mingyang143"},"content":"                false,","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"mingyang143"},"content":"                false,","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"mingyang143"},"content":"                false);","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(googleId);","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"mingyang143"},"content":"    public void testExecute_sessionDoesNotExist_failSilently() {","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"mingyang143"},"content":"        String sessionName \u003d \"incorrect-name\";","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, sessionName,","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"mingyang143"},"content":"        DeleteFeedbackSessionAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"mingyang143"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"mingyang143"},"content":"        assertEquals(\"The feedback session is deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"mingyang143"},"content":"        verify(mockLogic, times(1))","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"mingyang143"},"content":"                .deleteFeedbackSessionCascade(sessionName, course.getId());","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"mingyang143"},"content":"    public void testExecute_sessionExists_success() {","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, session.getName(),","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, session.getCourseId(),","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"mingyang143"},"content":"        DeleteFeedbackSessionAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"mingyang143"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"mingyang143"},"content":"        assertEquals(\"The feedback session is deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"mingyang143"},"content":"        verify(mockLogic, times(1))","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"mingyang143"},"content":"                .deleteFeedbackSessionCascade(session.getName(), session.getCourseId());","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"mingyang143"},"content":"    public void testExecute_missingParameters_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, \"session-name\",","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"mingyang143"},"content":"        String[] params2 \u003d {","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, \"course-id\",","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params2);","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"mingyang143"},"content":"        String[] params3 \u003d {","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, null,","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params3);","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"mingyang143"},"content":"        String[] params4 \u003d {","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, session.getName(),","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, null,","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params4);","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"mingyang143"},"content":"        String[] params5 \u003d {","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, null,","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, null,","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params5);","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"mingyang143"},"content":"    public void testSpecificAccessControl_notInstructor_cannotAccess() {","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, session.getName(),","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, session.getCourseId(),","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"mingyang143"},"content":"        loginAsStudent(googleId);","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"mingyang143"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"mingyang143"},"content":"    public void testSpecificAccessControl_instructorWithPermission_canAccess() {","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"mingyang143"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"mingyang143"},"content":"        instructorPrivileges.updatePrivilege(Const.InstructorPermissions.CAN_MODIFY_SESSION, true);","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\",","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"mingyang143"},"content":"                false, \"\", null, instructorPrivileges);","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(googleId);","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getFeedbackSessionFromRecycleBin(session.getName(), course.getId())).thenReturn(session);","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, session.getName(),","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, session.getCourseId(),","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"mingyang143"},"content":"        verifyCanAccess(params);","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"mingyang143"},"content":"    public void testSpecificAccessControl_instructorWithoutPermission_cannotAccess() {","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"mingyang143"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\",","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"mingyang143"},"content":"                false, \"\", null, instructorPrivileges);","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(googleId);","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getFeedbackSessionFromRecycleBin(session.getName(), course.getId())).thenReturn(session);","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, session.getName(),","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, session.getCourseId(),","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"mingyang143"},"content":"}","isFullCredit":false}],"authorContributionMap":{"mingyang143":166}},{"path":"src/test/java/teammates/sqlui/webapi/DeleteInstructorActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"DhiraPT"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.ArgumentMatchers.any;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.never;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.times;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.verify;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"DhiraPT"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"DhiraPT"},"content":"import org.mockito.Mockito;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"DhiraPT"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"DhiraPT"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"DhiraPT"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"DhiraPT"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Account;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Student;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"DhiraPT"},"content":"import teammates.ui.output.MessageOutput;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"DhiraPT"},"content":"import teammates.ui.webapi.DeleteInstructorAction;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"DhiraPT"},"content":"import teammates.ui.webapi.InvalidOperationException;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"DhiraPT"},"content":"/**","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"DhiraPT"},"content":" * SUT: {@link DeleteInstructorAction}.","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"DhiraPT"},"content":" */","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"DhiraPT"},"content":"public class DeleteInstructorActionTest extends BaseActionTest\u003cDeleteInstructorAction\u003e {","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"DhiraPT"},"content":"    private Course course;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"DhiraPT"},"content":"    private Instructor instructor;","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"DhiraPT"},"content":"    private Instructor instructor2;","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"DhiraPT"},"content":"    private Student student;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"DhiraPT"},"content":"    private String studentId \u003d \"student-googleId\";","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"DhiraPT"},"content":"    @Override","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"DhiraPT"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"DhiraPT"},"content":"        return Const.ResourceURIs.INSTRUCTOR;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"DhiraPT"},"content":"    @Override","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"DhiraPT"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"DhiraPT"},"content":"        return DELETE;","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"DhiraPT"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"DhiraPT"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"DhiraPT"},"content":"        Mockito.reset(mockLogic);","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"DhiraPT"},"content":"        course \u003d getTypicalCourse();","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"DhiraPT"},"content":"        instructor \u003d setupInstructor(\"instructor-googleId\", \"instructoremail@teammates.tmt\");","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"DhiraPT"},"content":"        instructor2 \u003d setupInstructor(\"instructor2-googleId\", \"instructor2email@teammates.tmt\");","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"DhiraPT"},"content":"        student \u003d getTypicalStudent();","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"DhiraPT"},"content":"        setupMockLogic();","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"DhiraPT"},"content":"    private Instructor setupInstructor(String googleId, String email) {","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"DhiraPT"},"content":"        Account account \u003d getTypicalAccount();","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"DhiraPT"},"content":"        account.setGoogleId(googleId);","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"DhiraPT"},"content":"        account.setEmail(email);","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"DhiraPT"},"content":"        Instructor instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"DhiraPT"},"content":"        instructor.setEmail(email);","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"DhiraPT"},"content":"        instructor.setDisplayedToStudents(true);","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"DhiraPT"},"content":"        instructor.setAccount(account);","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"DhiraPT"},"content":"        return instructor;","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"DhiraPT"},"content":"    private void setupMockLogic() {","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), instructor.getGoogleId())).thenReturn(instructor);","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), instructor2.getGoogleId())).thenReturn(instructor2);","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getStudentByGoogleId(course.getId(), studentId)).thenReturn(student);","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorForEmail(course.getId(), instructor.getEmail())).thenReturn(instructor);","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorForEmail(course.getId(), instructor2.getEmail())).thenReturn(instructor2);","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorsByCourse(course.getId())).thenReturn(List.of(instructor, instructor2));","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getStudentsForCourse(course.getId())).thenReturn(List.of(student));","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_deleteInstructorByGoogleId_success() {","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor2.getGoogleId(),","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"DhiraPT"},"content":"        DeleteInstructorAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getInstructorByGoogleId(course.getId(), instructor2.getGoogleId());","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteInstructorCascade(course.getId(), instructor2.getEmail());","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteInstructorCascade(any(), any());","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Instructor is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_deleteInstructorByEmail_success() {","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, instructor2.getEmail(),","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"DhiraPT"},"content":"        DeleteInstructorAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getInstructorForEmail(course.getId(), instructor2.getEmail());","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteInstructorCascade(course.getId(), instructor2.getEmail());","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteInstructorCascade(any(), any());","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Instructor is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_onlyOneInstructorInCourse_throwsInvalidOperationException() {","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"DhiraPT"},"content":"        // Override the mock logic for the course to have only one instructor","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorsByCourse(course.getId())).thenReturn(List.of(instructor));","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(mockLogic.getInstructorsByCourse(course.getId()).size(), 1);","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"DhiraPT"},"content":"        InvalidOperationException ioe \u003d verifyInvalidOperation(params);","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"The instructor you are trying to delete is the last instructor in the course. \"","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"DhiraPT"},"content":"                + \"Deleting the last instructor from the course is not allowed.\", ioe.getMessage());","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getInstructorByGoogleId(course.getId(), instructor.getGoogleId());","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteInstructorCascade(any(), any());","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_onlyOneRegisteredInstructor_throwsInvalidOperationException() {","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"DhiraPT"},"content":"        instructor2.setAccount(null);","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"DhiraPT"},"content":"        InvalidOperationException ioe \u003d verifyInvalidOperation(params);","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"The instructor you are trying to delete is the last instructor in the course. \"","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"DhiraPT"},"content":"                + \"Deleting the last instructor from the course is not allowed.\", ioe.getMessage());","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getInstructorByGoogleId(course.getId(), instructor.getGoogleId());","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteInstructorCascade(any(), any());","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_onlyOneInstructorDisplayedToStudents_throwsInvalidOperationException() {","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"DhiraPT"},"content":"        instructor2.setDisplayedToStudents(false);","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"DhiraPT"},"content":"        InvalidOperationException ioe \u003d verifyInvalidOperation(params);","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"The instructor you are trying to delete is the last instructor in the course. \"","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"DhiraPT"},"content":"                + \"Deleting the last instructor from the course is not allowed.\", ioe.getMessage());","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getInstructorByGoogleId(course.getId(), instructor.getGoogleId());","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteInstructorCascade(any(), any());","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_instructorDeleteOwnRoleByGoogleId_success() {","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"DhiraPT"},"content":"        DeleteInstructorAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getInstructorByGoogleId(course.getId(), instructor.getGoogleId());","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteInstructorCascade(course.getId(), instructor.getEmail());","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteInstructorCascade(any(), any());","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Instructor is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_deleteNonExistentInstructorByGoogleId_failSilently() {","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), \"fake-googleId\")).thenReturn(null);","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, \"fake-googleId\",","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"DhiraPT"},"content":"        DeleteInstructorAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getInstructorByGoogleId(course.getId(), \"fake-googleId\");","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteInstructorCascade(any(), any());","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Instructor is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_deleteNonExistentInstructorByEmail_failSilently() {","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"DhiraPT"},"content":"        String fakeInstructorEmail \u003d \"fake-instructoremail@teammates.tmt\";","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorForEmail(course.getId(), fakeInstructorEmail)).thenReturn(null);","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, fakeInstructorEmail,","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"DhiraPT"},"content":"        DeleteInstructorAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getInstructorForEmail(course.getId(), fakeInstructorEmail);","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteInstructorCascade(any(), any());","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Instructor is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_nonExistentCourse_failSilently() {","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"DhiraPT"},"content":"        String nonExistentCourseId \u003d \"non-existent-course-id\";","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getCourse(nonExistentCourseId)).thenReturn(null);","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, nonExistentCourseId,","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"DhiraPT"},"content":"        DeleteInstructorAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getInstructorByGoogleId(nonExistentCourseId, instructor.getGoogleId());","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteInstructorCascade(any(), any());","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Instructor is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_noParameters_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure();","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_missingCourseIdWithInstructorId_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_missingCourseIdWithInstructorEmail_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, instructor.getEmail(),","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_onlyCourseId_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"DhiraPT"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"DhiraPT"},"content":"        verifyCanAccess(params);","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructorWithPermission_canAccess() {","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor2.getGoogleId(),","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"DhiraPT"},"content":"        verifyCanAccess(params);","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":295,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":296,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructorWithInvalidPermission_cannotAccess() {","isFullCredit":false},{"lineNumber":297,"author":{"gitId":"DhiraPT"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();","isFullCredit":false},{"lineNumber":298,"author":{"gitId":"DhiraPT"},"content":"        instructorPrivileges.updatePrivilege(Const.InstructorPermissions.CAN_MODIFY_INSTRUCTOR, false);","isFullCredit":false},{"lineNumber":299,"author":{"gitId":"DhiraPT"},"content":"        instructor.setPrivileges(instructorPrivileges);","isFullCredit":false},{"lineNumber":300,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":301,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":302,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":303,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":304,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":305,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor2.getGoogleId(),","isFullCredit":false},{"lineNumber":306,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":307,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":308,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":309,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":310,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":311,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":312,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructorInDifferentCourse_cannotAccess() {","isFullCredit":false},{"lineNumber":313,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(\"instructor3-googleId\");","isFullCredit":false},{"lineNumber":314,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":315,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":316,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":317,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":318,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":319,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":320,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":321,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":322,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":323,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":324,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":325,"author":{"gitId":"DhiraPT"},"content":"        loginAsStudent(studentId);","isFullCredit":false},{"lineNumber":326,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":327,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":328,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":329,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":330,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":331,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":332,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":333,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":334,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":335,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":336,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":337,"author":{"gitId":"DhiraPT"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":338,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":339,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":340,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":341,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":342,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":343,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":344,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":345,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":346,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":347,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":348,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_unregistered_cannotAccess() {","isFullCredit":false},{"lineNumber":349,"author":{"gitId":"DhiraPT"},"content":"        loginAsUnregistered(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":350,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":351,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":352,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":353,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor.getGoogleId(),","isFullCredit":false},{"lineNumber":354,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":355,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":356,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":357,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":358,"author":{"gitId":"DhiraPT"},"content":"}","isFullCredit":false}],"authorContributionMap":{"DhiraPT":358}},{"path":"src/test/java/teammates/sqlui/webapi/DeleteNotificationActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.reset;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.datatransfer.NotificationStyle;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.datatransfer.NotificationTargetUser;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.Notification;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.output.MessageOutput;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.DeleteNotificationAction;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link DeleteNotificationAction}.","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":"public class DeleteNotificationActionTest extends BaseActionTest\u003cDeleteNotificationAction\u003e {","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":"    private static final String GOOGLE_ID \u003d \"user-googleId\";","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":"        return Const.ResourceURIs.NOTIFICATION;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"        return DELETE;","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"    void testSpecificAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"    void testSpecificAccessControl_instructor_cannotAccess() {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"    void testSpecificAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"        loginAsStudent(GOOGLE_ID);","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"    void testSpecificAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_notificationExists_success() {","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"        Notification testNotification \u003d new Notification(","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"InfinityTwo"},"content":"                Instant.now(),","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"InfinityTwo"},"content":"                Instant.ofEpochMilli(Instant.now().toEpochMilli() + 10000),","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"InfinityTwo"},"content":"                NotificationStyle.INFO,","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"InfinityTwo"},"content":"                NotificationTargetUser.GENERAL,","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"InfinityTwo"},"content":"                \"title\",","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"InfinityTwo"},"content":"                \"message\");","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getNotification(testNotification.getId())).thenReturn(testNotification);","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"InfinityTwo"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_ID, testNotification.getId().toString(),","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"InfinityTwo"},"content":"        DeleteNotificationAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"InfinityTwo"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification has been deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"InfinityTwo"},"content":"        reset(mockLogic);","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_notificationDoesNotExist_failSilently() {","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"InfinityTwo"},"content":"        UUID invalidUuid \u003d UUID.randomUUID();","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getNotification(invalidUuid)).thenReturn(null);","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"InfinityTwo"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_ID, invalidUuid.toString(),","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"InfinityTwo"},"content":"        DeleteNotificationAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"InfinityTwo"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification has been deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"InfinityTwo"},"content":"        reset(mockLogic);","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_missingNotificationUuid_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"InfinityTwo"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_ID, null,","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_missingParameters_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"InfinityTwo"},"content":"        String[] params \u003d {};","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":112}},{"path":"src/test/java/teammates/sqlui/webapi/DeleteStudentActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"DhiraPT"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.ArgumentMatchers.any;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.never;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.times;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.verify;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"DhiraPT"},"content":"import org.mockito.Mockito;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"DhiraPT"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"DhiraPT"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"DhiraPT"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"DhiraPT"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Student;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"DhiraPT"},"content":"import teammates.ui.output.MessageOutput;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"DhiraPT"},"content":"import teammates.ui.webapi.DeleteStudentAction;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"DhiraPT"},"content":"/**","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"DhiraPT"},"content":" * SUT: {@link DeleteStudentAction}.","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"DhiraPT"},"content":" */","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"DhiraPT"},"content":"public class DeleteStudentActionTest extends BaseActionTest\u003cDeleteStudentAction\u003e {","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"DhiraPT"},"content":"    private Course course;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"DhiraPT"},"content":"    private Student student;","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"DhiraPT"},"content":"    private Instructor instructor;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"DhiraPT"},"content":"    private String studentId \u003d \"student-googleId\";","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"DhiraPT"},"content":"    private String instructorId \u003d \"instructor-googleId\";","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"DhiraPT"},"content":"    @Override","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"DhiraPT"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"DhiraPT"},"content":"        return Const.ResourceURIs.STUDENT;","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"DhiraPT"},"content":"    @Override","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"DhiraPT"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"DhiraPT"},"content":"        return DELETE;","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"DhiraPT"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"DhiraPT"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"DhiraPT"},"content":"        Mockito.reset(mockLogic);","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"DhiraPT"},"content":"        course \u003d getTypicalCourse();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"DhiraPT"},"content":"        student \u003d getTypicalStudent();","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"DhiraPT"},"content":"        instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"DhiraPT"},"content":"        setupMockLogic();","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"DhiraPT"},"content":"    private void setupMockLogic() {","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getStudentByGoogleId(course.getId(), studentId)).thenReturn(student);","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getStudentForEmail(course.getId(), student.getEmail())).thenReturn(student);","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), instructorId)).thenReturn(instructor);","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_deleteStudentByEmail_success() {","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student.getEmail(),","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"DhiraPT"},"content":"        DeleteStudentAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).getStudentByGoogleId(any(), any());","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteStudentCascade(course.getId(), student.getEmail());","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Student is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_deleteStudentById_success() {","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, studentId,","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"DhiraPT"},"content":"        DeleteStudentAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getStudentByGoogleId(course.getId(), studentId);","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteStudentCascade(course.getId(), student.getEmail());","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Student is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_nonExistentCourse_failSilently() {","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getCourse(\"RANDOM_COURSE\")).thenReturn(null);","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, \"RANDOM_COURSE\",","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, studentId,","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"DhiraPT"},"content":"        DeleteStudentAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getStudentByGoogleId(\"RANDOM_COURSE\", studentId);","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteStudentCascade(any(), any());","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Student is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_nonExistentStudentId_failSilently() {","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getStudentByGoogleId(course.getId(), \"RANDOM_STUDENT\")).thenReturn(null);","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, \"RANDOM_STUDENT\",","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"DhiraPT"},"content":"        DeleteStudentAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).getStudentByGoogleId(course.getId(), \"RANDOM_STUDENT\");","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteStudentCascade(any(), any());","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Student is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_nonExistentStudentEmail_failSilently() {","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getStudentForEmail(course.getId(), \"RANDOM_EMAIL\")).thenReturn(null);","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_EMAIL, \"RANDOM_EMAIL\",","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"DhiraPT"},"content":"        DeleteStudentAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).getStudentByGoogleId(any(), any());","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteStudentCascade(course.getId(), \"RANDOM_EMAIL\");","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteStudentCascade(any(), any());","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteStudentCascade(course.getId(), student.getEmail());","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Student is successfully deleted.\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_noParameters_throwsInvalidParametersException() {","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure();","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_missingStudentIdOrEmail_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_missingCourseIdWithStudentId_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, studentId,","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_missingCourseIdWithStudentEmail_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student.getEmail(),","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"DhiraPT"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, studentId,","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"DhiraPT"},"content":"        verifyCanAccess(params);","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructorWithPermission_canAccess() {","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(instructorId);","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, studentId,","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"DhiraPT"},"content":"        verifyCanAccess(params);","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructorWithInvalidPermission_cannotAccess() {","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"DhiraPT"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"DhiraPT"},"content":"        instructorPrivileges.updatePrivilege(Const.InstructorPermissions.CAN_MODIFY_STUDENT, false);","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"DhiraPT"},"content":"        instructor.setPrivileges(instructorPrivileges);","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, studentId,","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructorInDifferentCourse_cannotAccess() {","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(\"instructor2-googleId\");","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, studentId,","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"DhiraPT"},"content":"        loginAsStudent(studentId);","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, studentId,","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"DhiraPT"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.STUDENT_ID, studentId,","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"DhiraPT"},"content":"}","isFullCredit":false}],"authorContributionMap":{"DhiraPT":250}},{"path":"src/test/java/teammates/sqlui/webapi/DeleteStudentsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"DhiraPT"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.ArgumentMatchers.any;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.never;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.times;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.verify;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"DhiraPT"},"content":"import org.mockito.Mockito;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"DhiraPT"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"DhiraPT"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"DhiraPT"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"DhiraPT"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"DhiraPT"},"content":"import teammates.ui.output.MessageOutput;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"DhiraPT"},"content":"import teammates.ui.webapi.DeleteStudentsAction;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"DhiraPT"},"content":"/**","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"DhiraPT"},"content":" * SUT: {@link DeleteStudentsAction}.","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"DhiraPT"},"content":" */","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"DhiraPT"},"content":"public class DeleteStudentsActionTest extends BaseActionTest\u003cDeleteStudentsAction\u003e {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"DhiraPT"},"content":"    private static final int DELETE_LIMIT \u003d 3;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"DhiraPT"},"content":"    private Course course;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"DhiraPT"},"content":"    private Instructor instructor;","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"DhiraPT"},"content":"    private String instructorId \u003d \"instructor-googleId\";","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"DhiraPT"},"content":"    @Override","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"DhiraPT"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"DhiraPT"},"content":"        return Const.ResourceURIs.STUDENTS;","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"DhiraPT"},"content":"    @Override","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"DhiraPT"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"DhiraPT"},"content":"        return DELETE;","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"DhiraPT"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"DhiraPT"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"DhiraPT"},"content":"        Mockito.reset(mockLogic);","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"DhiraPT"},"content":"        course \u003d getTypicalCourse();","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"DhiraPT"},"content":"        instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"DhiraPT"},"content":"        setupMockLogic();","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"DhiraPT"},"content":"    private void setupMockLogic() {","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), instructorId)).thenReturn(instructor);","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_deleteLimitedStudents_success() {","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.LIMIT, String.valueOf(DELETE_LIMIT),","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"DhiraPT"},"content":"        DeleteStudentsAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteStudentsInCourseCascade(course.getId());","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Successful\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_nonExistentCourse_failSilently() {","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getCourse(\"RANDOM_ID\")).thenReturn(null);","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, \"RANDOM_ID\",","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.LIMIT, String.valueOf(DELETE_LIMIT),","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"DhiraPT"},"content":"        DeleteStudentsAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"DhiraPT"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteStudentsInCourseCascade(\"RANDOM_ID\");","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, times(1)).deleteStudentsInCourseCascade(any());","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"DhiraPT"},"content":"        verify(mockLogic, never()).deleteStudentsInCourseCascade(course.getId());","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"DhiraPT"},"content":"        assertEquals(\"Successful\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_noParameters_throwsInvalidParametersException() {","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure();","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_missingCourseId_throwsInvalidParametersException() {","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.LIMIT, String.valueOf(DELETE_LIMIT),","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_missingLimit_throwsInvalidParametersException() {","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"DhiraPT"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructorWithPermission_canAccess() {","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(instructorId);","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.LIMIT, String.valueOf(DELETE_LIMIT),","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"DhiraPT"},"content":"        verifyCanAccess(params);","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructorWithInvalidPermission_cannotAccess() {","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"DhiraPT"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"DhiraPT"},"content":"        instructorPrivileges.updatePrivilege(Const.InstructorPermissions.CAN_MODIFY_STUDENT, false);","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"DhiraPT"},"content":"        instructor.setPrivileges(instructorPrivileges);","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(instructorId);","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.LIMIT, String.valueOf(DELETE_LIMIT),","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructorInDifferentCourse_cannotAccess() {","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(\"instructor2-googleId\");","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.LIMIT, String.valueOf(DELETE_LIMIT),","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"DhiraPT"},"content":"        loginAsStudent(\"student-googleId\");","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.LIMIT, String.valueOf(DELETE_LIMIT),","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"DhiraPT"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"DhiraPT"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"DhiraPT"},"content":"                Const.ParamsNames.LIMIT, String.valueOf(DELETE_LIMIT),","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"DhiraPT"},"content":"        };","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"DhiraPT"},"content":"}","isFullCredit":false}],"authorContributionMap":{"DhiraPT":173}},{"path":"src/test/java/teammates/sqlui/webapi/EnrollStudentsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"mingyang143"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.ArgumentMatchers.any;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.ArgumentMatchers.argThat;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.doThrow;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"mingyang143"},"content":"import java.util.ArrayList;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"mingyang143"},"content":"import java.util.Arrays;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"mingyang143"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"mingyang143"},"content":"import java.util.Objects;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"mingyang143"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"mingyang143"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"mingyang143"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"mingyang143"},"content":"import teammates.common.exception.EntityAlreadyExistsException;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"mingyang143"},"content":"import teammates.common.exception.EntityDoesNotExistException;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"mingyang143"},"content":"import teammates.common.exception.InvalidParametersException;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"mingyang143"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Section;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Student;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Team;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.output.EnrollStudentsData;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.output.StudentData;","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.request.StudentsEnrollRequest;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.webapi.EnrollStudentsAction;","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.webapi.JsonResult;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"mingyang143"},"content":"/**","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"mingyang143"},"content":" * Test cases for the {@link EnrollStudentsAction} class.","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"mingyang143"},"content":" */","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"mingyang143"},"content":"public class EnrollStudentsActionTest extends BaseActionTest\u003cEnrollStudentsAction\u003e {","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"mingyang143"},"content":"    private Course course;","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"mingyang143"},"content":"    private Team team;","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"mingyang143"},"content":"    private Section section;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"mingyang143"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"mingyang143"},"content":"        return Const.ResourceURIs.STUDENTS;","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"mingyang143"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"mingyang143"},"content":"        return PUT;","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"mingyang143"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"mingyang143"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"mingyang143"},"content":"        course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"mingyang143"},"content":"        section \u003d new Section(course, \"section\");","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"mingyang143"},"content":"        team \u003d new Team(section, course.getId());","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"mingyang143"},"content":"    public void testExecute_withNewStudent_shouldBeAdded() throws Exception {","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"mingyang143"},"content":"        Student newStudent \u003d new Student(course, \"name\", \"email.com\", \"\", team);","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getStudentsForCourse(course.getId())).thenReturn(new ArrayList\u003c\u003e());","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.createStudent(","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"mingyang143"},"content":"                argThat(argument -\u003e Objects.equals(argument.getName(), newStudent.getName())","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"mingyang143"},"content":"                        \u0026\u0026 Objects.equals(argument.getEmail(), newStudent.getEmail())","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"mingyang143"},"content":"                        \u0026\u0026 Objects.equals(argument.getTeam(), newStudent.getTeam())","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"mingyang143"},"content":"                        \u0026\u0026 Objects.equals(argument.getSection(), newStudent.getSection())))).thenReturn(newStudent);","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getTeamOrCreate(section, \"team\")).thenReturn(team);","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getSectionOrCreate(course.getId(), \"section\")).thenReturn(section);","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"mingyang143"},"content":"        StudentsEnrollRequest req \u003d prepareRequest(newStudent);","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"mingyang143"},"content":"        EnrollStudentsAction action \u003d getAction(req, params);","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"mingyang143"},"content":"        JsonResult result \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"mingyang143"},"content":"        List\u003cStudentData\u003e enrolledStudents \u003d ((EnrollStudentsData) result.getOutput()).getStudentsData().getStudents();","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"mingyang143"},"content":"        assertEquals(1, enrolledStudents.size());","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"mingyang143"},"content":"        assertEquals(enrolledStudents.get(0).getEmail(), newStudent.getEmail());","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"mingyang143"},"content":"        verifySpecifiedTasksAdded(Const.TaskQueue.SEARCH_INDEXING_QUEUE_NAME, 1);","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"mingyang143"},"content":"    public void testExecute_studentAlreadyEnrolled_updateStudent() throws Exception {","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"mingyang143"},"content":"        Student newStudent \u003d new Student(course, \"name\", \"email.com\", \"\", team);","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"mingyang143"},"content":"        Student existingStudent \u003d new Student(course, \"oldName\", \"email.com\", \"\", team);","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getStudentsForCourse(course.getId())).thenReturn(new ArrayList\u003c\u003e(List.of(existingStudent)));","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getStudentForEmail(course.getId(), newStudent.getEmail())).thenReturn(existingStudent);","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getTeamOrCreate(section, \"team\")).thenReturn(team);","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getSectionOrCreate(course.getId(), \"section\")).thenReturn(section);","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.updateStudentCascade(","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"mingyang143"},"content":"                argThat(argument -\u003e Objects.equals(argument.getName(), newStudent.getName())","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"mingyang143"},"content":"                        \u0026\u0026 Objects.equals(argument.getEmail(), newStudent.getEmail())","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"mingyang143"},"content":"                        \u0026\u0026 Objects.equals(argument.getTeam(), newStudent.getTeam())","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"mingyang143"},"content":"                        \u0026\u0026 Objects.equals(argument.getSection(), newStudent.getSection())))).thenReturn(newStudent);","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"mingyang143"},"content":"        StudentsEnrollRequest req \u003d prepareRequest(newStudent);","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"mingyang143"},"content":"        EnrollStudentsAction action \u003d getAction(req, params);","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"mingyang143"},"content":"        JsonResult result \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"mingyang143"},"content":"        List\u003cStudentData\u003e enrolledStudents \u003d ((EnrollStudentsData) result.getOutput()).getStudentsData().getStudents();","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"mingyang143"},"content":"        assertEquals(enrolledStudents.size(), 1);","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"mingyang143"},"content":"        assertEquals(enrolledStudents.get(0).getName(), newStudent.getName());","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"mingyang143"},"content":"        verifySpecifiedTasksAdded(Const.TaskQueue.SEARCH_INDEXING_QUEUE_NAME, 1);","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"mingyang143"},"content":"    public void testExecute_invalidParamsAndNotAlreadyEnrolled_studentAddedToErrorList() throws","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"mingyang143"},"content":"            EntityAlreadyExistsException, InvalidParametersException {","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"mingyang143"},"content":"        doThrow(new InvalidParametersException(\"\")).when(mockLogic).createStudent(any(Student.class));","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"mingyang143"},"content":"        Student newStudent \u003d new Student(course, \"name\", \"email.com\", \"\", team);","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getStudentsForCourse(course.getId())).thenReturn(new ArrayList\u003c\u003e());","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getTeamOrCreate(section, \"team\")).thenReturn(team);","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getSectionOrCreate(course.getId(), \"section\")).thenReturn(section);","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"mingyang143"},"content":"        StudentsEnrollRequest req \u003d prepareRequest(newStudent);","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"mingyang143"},"content":"        EnrollStudentsAction action \u003d getAction(req, params);","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"mingyang143"},"content":"        JsonResult result \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"mingyang143"},"content":"        List\u003cStudentData\u003e enrolledStudents \u003d ((EnrollStudentsData) result.getOutput()).getStudentsData().getStudents();","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"mingyang143"},"content":"        List\u003cEnrollStudentsData.EnrollErrorResults\u003e errors \u003d","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"mingyang143"},"content":"                ((EnrollStudentsData) result.getOutput()).getUnsuccessfulEnrolls();","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"mingyang143"},"content":"        assertEquals(errors.size(), 1);","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"mingyang143"},"content":"        assertEquals(enrolledStudents.size(), 0);","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"mingyang143"},"content":"    public void testExecute_invalidParamsAndAlreadyEnrolled_studentAddedToErrorList()","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"mingyang143"},"content":"            throws InvalidParametersException, EntityDoesNotExistException, EntityAlreadyExistsException {","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"mingyang143"},"content":"        doThrow(new InvalidParametersException(\"\")).when(mockLogic).updateStudentCascade(any(Student.class));","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"mingyang143"},"content":"        Student newStudent \u003d new Student(course, \"name\", \"email.com\", \"\", team);","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getStudentsForCourse(course.getId())).thenReturn(new ArrayList\u003c\u003e(List.of(newStudent)));","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getStudentForEmail(course.getId(), newStudent.getEmail())).thenReturn(newStudent);","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getTeamOrCreate(section, \"team\")).thenReturn(team);","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getSectionOrCreate(course.getId(), \"section\")).thenReturn(section);","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"mingyang143"},"content":"        StudentsEnrollRequest req \u003d prepareRequest(newStudent);","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"mingyang143"},"content":"        EnrollStudentsAction action \u003d getAction(req, params);","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"mingyang143"},"content":"        JsonResult result \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"mingyang143"},"content":"        List\u003cStudentData\u003e enrolledStudents \u003d ((EnrollStudentsData) result.getOutput()).getStudentsData().getStudents();","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"mingyang143"},"content":"        List\u003cEnrollStudentsData.EnrollErrorResults\u003e errors \u003d","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"mingyang143"},"content":"                ((EnrollStudentsData) result.getOutput()).getUnsuccessfulEnrolls();","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"mingyang143"},"content":"        assertEquals(errors.size(), 1);","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"mingyang143"},"content":"        assertEquals(enrolledStudents.size(), 0);","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"mingyang143"},"content":"    public void testExecute_invalidCourseId_invalidHttpRequestBodyException() {","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, null,","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"mingyang143"},"content":"    public void testSpecificAccessControl_instructorWithInvalidPermission_cannotAccess() {","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\",","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"mingyang143"},"content":"                false, \"\", null, new InstructorPrivileges());","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"mingyang143"},"content":"    public void testSpecificAccessControl_instructorWithValidPermission_canAccess() {","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"mingyang143"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"mingyang143"},"content":"        instructorPrivileges.updatePrivilege(Const.InstructorPermissions.CAN_MODIFY_STUDENT, true);","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"mingyang143"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\",","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"mingyang143"},"content":"                false, \"\", null, instructorPrivileges);","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), instructor.getGoogleId())).thenReturn(instructor);","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"mingyang143"},"content":"        verifyCanAccess(params);","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"mingyang143"},"content":"    public void testSpecificAccessControl_notInstructor_cannotAccess() {","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"mingyang143"},"content":"        loginAsStudent(\"random-id\");","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"mingyang143"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"mingyang143"},"content":"    private StudentsEnrollRequest prepareRequest(Student... studentsToEnroll) {","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"mingyang143"},"content":"        List\u003cStudentsEnrollRequest.StudentEnrollRequest\u003e requestList \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"mingyang143"},"content":"        Arrays.stream(studentsToEnroll).forEach(student -\u003e requestList.add(","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"mingyang143"},"content":"                new StudentsEnrollRequest.StudentEnrollRequest(student.getName(), student.getEmail(),","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"mingyang143"},"content":"                \"team\", \"section\", student.getComments())));","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"mingyang143"},"content":"        return new StudentsEnrollRequest(requestList);","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"mingyang143"},"content":"}","isFullCredit":false}],"authorContributionMap":{"mingyang143":226}},{"path":"src/test/java/teammates/sqlui/webapi/FeedbackSessionPublishedRemindersActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"DhiraPT"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.mockStatic;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.never;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.times;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.verify;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"DhiraPT"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"DhiraPT"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"DhiraPT"},"content":"import org.mockito.MockedStatic;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"DhiraPT"},"content":"import org.mockito.Mockito;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"DhiraPT"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"DhiraPT"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"DhiraPT"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"DhiraPT"},"content":"import teammates.common.util.RequestTracer;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"DhiraPT"},"content":"import teammates.storage.sqlentity.FeedbackSession;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"DhiraPT"},"content":"import teammates.ui.output.MessageOutput;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"DhiraPT"},"content":"import teammates.ui.webapi.FeedbackSessionPublishedRemindersAction;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"DhiraPT"},"content":"/**","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"DhiraPT"},"content":" * SUT: {@link FeedbackSessionPublishedRemindersAction}.","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"DhiraPT"},"content":" */","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"DhiraPT"},"content":"public class FeedbackSessionPublishedRemindersActionTest extends BaseActionTest\u003cFeedbackSessionPublishedRemindersAction\u003e {","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"DhiraPT"},"content":"    private FeedbackSession session;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"DhiraPT"},"content":"    private FeedbackSession session2;","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"DhiraPT"},"content":"    @Override","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"DhiraPT"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"DhiraPT"},"content":"        return Const.CronJobURIs.AUTOMATED_FEEDBACK_PUBLISHED_REMINDERS;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"DhiraPT"},"content":"    @Override","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"DhiraPT"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"DhiraPT"},"content":"        return GET;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"DhiraPT"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"DhiraPT"},"content":"    public void setUp() {","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"DhiraPT"},"content":"        Mockito.reset(mockLogic);","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"DhiraPT"},"content":"        Course course \u003d getTypicalCourse();","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"DhiraPT"},"content":"        session \u003d getTypicalFeedbackSessionForCourse(course);","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"DhiraPT"},"content":"        session.setPublishedEmailEnabled(true);","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"DhiraPT"},"content":"        session2 \u003d getTypicalFeedbackSessionForCourse(course);","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"DhiraPT"},"content":"        session2.setName(\"test-feedbacksession2\");","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"DhiraPT"},"content":"        session2.setPublishedEmailEnabled(true);","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_allSessionsPublished_emailsSent() {","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent())","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"DhiraPT"},"content":"                .thenReturn(List.of(session, session2));","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"DhiraPT"},"content":"        try (MockedStatic\u003cRequestTracer\u003e mockRequestTracer \u003d mockStatic(RequestTracer.class)) {","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"DhiraPT"},"content":"            FeedbackSessionPublishedRemindersAction action \u003d getAction();","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"DhiraPT"},"content":"            MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"DhiraPT"},"content":"            verify(mockLogic, times(1)).getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent();","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"DhiraPT"},"content":"            mockRequestTracer.verify(RequestTracer::checkRemainingTime, times(2));","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"DhiraPT"},"content":"            verifySpecifiedTasksAdded(Const.TaskQueue.FEEDBACK_SESSION_PUBLISHED_EMAIL_QUEUE_NAME, 2);","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"DhiraPT"},"content":"            assertEquals(\"Successful\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"DhiraPT"},"content":"        }","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_oneSessionPublished_emailsSent() {","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent()).thenReturn(List.of(session));","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"DhiraPT"},"content":"        try (MockedStatic\u003cRequestTracer\u003e mockRequestTracer \u003d mockStatic(RequestTracer.class)) {","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"DhiraPT"},"content":"            FeedbackSessionPublishedRemindersAction action \u003d getAction();","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"DhiraPT"},"content":"            MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"DhiraPT"},"content":"            verify(mockLogic, times(1)).getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent();","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"DhiraPT"},"content":"            mockRequestTracer.verify(RequestTracer::checkRemainingTime, times(1));","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"DhiraPT"},"content":"            verifySpecifiedTasksAdded(Const.TaskQueue.FEEDBACK_SESSION_PUBLISHED_EMAIL_QUEUE_NAME, 1);","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"DhiraPT"},"content":"            assertEquals(\"Successful\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"DhiraPT"},"content":"        }","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"DhiraPT"},"content":"    void testExecute_noSessionsPublished_noEmailsSent() {","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"DhiraPT"},"content":"        when(mockLogic.getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent()).thenReturn(List.of());","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"DhiraPT"},"content":"        try (MockedStatic\u003cRequestTracer\u003e mockRequestTracer \u003d mockStatic(RequestTracer.class)) {","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"DhiraPT"},"content":"            FeedbackSessionPublishedRemindersAction action \u003d getAction();","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"DhiraPT"},"content":"            MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"DhiraPT"},"content":"            verify(mockLogic, times(1)).getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent();","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"DhiraPT"},"content":"            mockRequestTracer.verify(RequestTracer::checkRemainingTime, never());","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"DhiraPT"},"content":"            verifyNoTasksAdded();","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"DhiraPT"},"content":"            assertEquals(\"Successful\", actionOutput.getMessage());","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"DhiraPT"},"content":"        }","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"DhiraPT"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"DhiraPT"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_instructor_cannotAccess() {","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"DhiraPT"},"content":"        loginAsInstructor(getTypicalInstructor().getGoogleId());","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"DhiraPT"},"content":"        loginAsStudent(getTypicalStudent().getGoogleId());","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"DhiraPT"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"DhiraPT"},"content":"","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"DhiraPT"},"content":"    @Test","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"DhiraPT"},"content":"    void testSpecificAccessControl_unregistered_cannotAccess() {","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"DhiraPT"},"content":"        loginAsUnregistered(getTypicalInstructor().getGoogleId());","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"DhiraPT"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"DhiraPT"},"content":"    }","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"DhiraPT"},"content":"}","isFullCredit":false}],"authorContributionMap":{"DhiraPT":128}},{"path":"src/test/java/teammates/sqlui/webapi/GetAccountActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"mingyang143"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.times;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.verify;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"mingyang143"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"mingyang143"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Account;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.output.AccountData;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.webapi.EntityNotFoundException;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.webapi.GetAccountAction;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"mingyang143"},"content":"/**","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"mingyang143"},"content":" * SUT: {@link GetAccountAction}.","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"mingyang143"},"content":" */","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"mingyang143"},"content":"public class GetAccountActionTest extends BaseActionTest\u003cGetAccountAction\u003e {","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"mingyang143"},"content":"    String googleId \u003d \"test.googleId\";","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"mingyang143"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"mingyang143"},"content":"        return Const.ResourceURIs.ACCOUNT;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"mingyang143"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"mingyang143"},"content":"        return GET;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"mingyang143"},"content":"    void testExecute_validParams_success() {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"mingyang143"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"mingyang143"},"content":"        Account account \u003d new Account(googleId, \"name\", \"email\");","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getAccountForGoogleId(googleId)).thenReturn(account);","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, googleId,","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"mingyang143"},"content":"        GetAccountAction a \u003d getAction(params);","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"mingyang143"},"content":"        AccountData output \u003d (AccountData) getJsonResult(a).getOutput();","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"mingyang143"},"content":"        assertEquals(output.getGoogleId(), googleId);","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"mingyang143"},"content":"    void testExecute_accountDoesNotExist_throwsEntityNotFoundException() {","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"mingyang143"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getAccountForGoogleId(googleId)).thenReturn(null);","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, googleId,","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"mingyang143"},"content":"        EntityNotFoundException e \u003d verifyEntityNotFound(params);","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"mingyang143"},"content":"        assertEquals(\"Account does not exist.\", e.getMessage());","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"mingyang143"},"content":"        verify(mockLogic, times(1)).getAccountForGoogleId(googleId);","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"mingyang143"},"content":"    void testExecute_noParameters_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {};","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure();","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"mingyang143"},"content":"    void testSpecificAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"mingyang143"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"mingyang143"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"mingyang143"},"content":"    void testSpecificAccessControl_instructor_cannotAccess() {","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(googleId);","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"mingyang143"},"content":"    void testSpecificAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"mingyang143"},"content":"        loginAsStudent(googleId);","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"mingyang143"},"content":"    void testSpecificAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"mingyang143"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"mingyang143"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"mingyang143"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"mingyang143"},"content":"}","isFullCredit":false}],"authorContributionMap":{"mingyang143":92}},{"path":"src/test/java/teammates/sqlui/webapi/GetAccountsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"mingyang143"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"mingyang143"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"mingyang143"},"content":"import java.util.ArrayList;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"mingyang143"},"content":"import java.util.Collections;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"mingyang143"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"mingyang143"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"mingyang143"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"mingyang143"},"content":"import teammates.storage.sqlentity.Account;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.output.AccountData;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.output.AccountsData;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"mingyang143"},"content":"import teammates.ui.webapi.GetAccountsAction;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"mingyang143"},"content":"/**","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"mingyang143"},"content":" * SUT: {@link GetAccountsAction}.","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"mingyang143"},"content":" */","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"mingyang143"},"content":"public class GetAccountsActionTest extends BaseActionTest\u003cGetAccountsAction\u003e {","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"mingyang143"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"mingyang143"},"content":"        return Const.ResourceURIs.ACCOUNTS;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"mingyang143"},"content":"    @Override","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"mingyang143"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"mingyang143"},"content":"        return GET;","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"mingyang143"},"content":"    private void verifyAccounts(List\u003cAccountData\u003e accountDataList, List\u003cAccount\u003e accounts) {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"mingyang143"},"content":"        assertEquals(accountDataList.size(), accounts.size());","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"mingyang143"},"content":"        for (int i \u003d 0; i \u003c accountDataList.size(); i++) {","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"mingyang143"},"content":"            AccountData accountData \u003d accountDataList.get(i);","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"mingyang143"},"content":"            Account account \u003d accounts.get(i);","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"mingyang143"},"content":"            assertEquals(accountData.getGoogleId(), account.getGoogleId());","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"mingyang143"},"content":"            assertEquals(accountData.getEmail(), account.getEmail());","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"mingyang143"},"content":"            assertEquals(accountData.getName(), account.getName());","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"mingyang143"},"content":"        }","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"mingyang143"},"content":"    void testExecute_multipleAccountsWithEmail_multipleAccountsFetched() {","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"mingyang143"},"content":"        List\u003cAccount\u003e accounts \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"mingyang143"},"content":"        Account accountStub \u003d getTypicalAccount();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"mingyang143"},"content":"        Account anotherAccountStub \u003d new Account(\"anotherGoogleId\", \"anotherEmail\",","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"mingyang143"},"content":"                accountStub.getEmail());","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"mingyang143"},"content":"        accounts.add(accountStub);","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"mingyang143"},"content":"        accounts.add(anotherAccountStub);","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getAccountsForEmail(accountStub.getEmail())).thenReturn(accounts);","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.USER_EMAIL, accountStub.getEmail(),","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"mingyang143"},"content":"        GetAccountsAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"mingyang143"},"content":"        AccountsData actionOutput \u003d (AccountsData) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"mingyang143"},"content":"        List\u003cAccountData\u003e accountDataList \u003d actionOutput.getAccounts();","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"mingyang143"},"content":"        verifyAccounts(accountDataList, accounts);","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"mingyang143"},"content":"    void testExecute_oneAccountWithEmail_accountFetched() {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"mingyang143"},"content":"        List\u003cAccount\u003e accounts \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"mingyang143"},"content":"        Account accountStub \u003d getTypicalAccount();","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"mingyang143"},"content":"        accounts.add(accountStub);","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getAccountsForEmail(accountStub.getEmail())).thenReturn(accounts);","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.USER_EMAIL, accountStub.getEmail(),","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"mingyang143"},"content":"        GetAccountsAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"mingyang143"},"content":"        AccountsData actionOutput \u003d (AccountsData) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"mingyang143"},"content":"        List\u003cAccountData\u003e accountDataList \u003d actionOutput.getAccounts();","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"mingyang143"},"content":"        verifyAccounts(accountDataList, accounts);","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"mingyang143"},"content":"    void testExecute_noAccountsWithEmail_noAccountsFetched() {","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"mingyang143"},"content":"        when(mockLogic.getAccountsForEmail(\"email\")).thenReturn(Collections.emptyList());","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.USER_EMAIL, \"email\",","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"mingyang143"},"content":"        GetAccountsAction action \u003d getAction(params);","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"mingyang143"},"content":"        AccountsData actionOutput \u003d (AccountsData) getJsonResult(action).getOutput();","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"mingyang143"},"content":"        List\u003cAccountData\u003e accountDataList \u003d actionOutput.getAccounts();","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"mingyang143"},"content":"        verifyAccounts(accountDataList, Collections.emptyList());","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"mingyang143"},"content":"    void textExecute_invalidParams_throwsInvalidParametersException() {","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"mingyang143"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"mingyang143"},"content":"                Const.ParamsNames.USER_EMAIL, null,","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"mingyang143"},"content":"        };","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"mingyang143"},"content":"        String[] params2 \u003d {};","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"mingyang143"},"content":"        verifyHttpParameterFailure(params2);","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"mingyang143"},"content":"    void testSpecificAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"mingyang143"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"mingyang143"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"mingyang143"},"content":"    void testSpecificAccessControl_instructor_cannotAccess() {","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"mingyang143"},"content":"        loginAsInstructor(getTypicalAccount().getGoogleId());","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"mingyang143"},"content":"    void testSpecificAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"mingyang143"},"content":"        loginAsStudent(getTypicalAccount().getGoogleId());","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"mingyang143"},"content":"    @Test","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"mingyang143"},"content":"    void testSpecificAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"mingyang143"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"mingyang143"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"mingyang143"},"content":"","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"mingyang143"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"mingyang143"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"mingyang143"},"content":"    }","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"mingyang143"},"content":"}","isFullCredit":false}],"authorContributionMap":{"mingyang143":128}},{"path":"src/test/java/teammates/sqlui/webapi/GetNotificationActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.reset;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.Notification;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.output.NotificationData;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.EntityNotFoundException;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.GetNotificationAction;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.InvalidHttpParameterException;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.JsonResult;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link GetNotificationAction}.","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":"public class GetNotificationActionTest extends BaseActionTest\u003cGetNotificationAction\u003e {","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":"        return Const.ResourceURIs.NOTIFICATION;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"        return GET;","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"    public void baseClassSetup() {","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_withValidNotificationId_shouldReturnData() {","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"        Notification testNotification \u003d getTypicalNotificationWithId();","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"        NotificationData expected \u003d new NotificationData(testNotification);","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_ID, String.valueOf(testNotification.getId()),","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getNotification(testNotification.getId())).thenReturn(testNotification);","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"        GetNotificationAction action \u003d getAction(requestParams);","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"        NotificationData output \u003d (NotificationData) jsonResult.getOutput();","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"        verifyNotificationEquals(expected, output);","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"        reset(mockLogic);","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_nonExistentNotification_shouldThrowError() {","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"InfinityTwo"},"content":"        GetNotificationAction action \u003d getAction(Const.ParamsNames.NOTIFICATION_ID, UUID.randomUUID().toString());","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"InfinityTwo"},"content":"        EntityNotFoundException enfe \u003d assertThrows(EntityNotFoundException.class, action::execute);","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification does not exist.\", enfe.getMessage());","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_notificationIdIsNull_shouldThrowError() {","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"InfinityTwo"},"content":"        GetNotificationAction action \u003d getAction(Const.ParamsNames.NOTIFICATION_ID, null, new String[] {});","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpParameterException ihpe \u003d assertThrows(InvalidHttpParameterException.class, action::execute);","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"The [notificationid] HTTP parameter is null.\", ihpe.getMessage());","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"InfinityTwo"},"content":"    private void verifyNotificationEquals(NotificationData expected, NotificationData actual) {","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getNotificationId(), actual.getNotificationId());","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getStyle(), actual.getStyle());","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getTargetUser(), actual.getTargetUser());","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getTitle(), actual.getTitle());","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getMessage(), actual.getMessage());","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getStartTimestamp(), actual.getStartTimestamp());","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getEndTimestamp(), actual.getEndTimestamp());","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":84}},{"path":"src/test/java/teammates/sqlui/webapi/GetNotificationsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"import java.util.ArrayList;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"import java.util.Set;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"import java.util.stream.Collectors;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.datatransfer.NotificationTargetUser;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.Notification;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.output.NotificationData;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.output.NotificationsData;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.GetNotificationsAction;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.JsonResult;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link GetNotificationsAction}.","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":"public class GetNotificationsActionTest extends BaseActionTest\u003cGetNotificationsAction\u003e {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":"    private static final String GOOGLE_ID \u003d \"user-googleId\";","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"    private static final int READ_NOTIFICATION_COUNT \u003d 5;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":"    private static final int UNREAD_NOTIFICATION_COUNT \u003d 10;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"        return Const.ResourceURIs.NOTIFICATIONS;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"        return GET;","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_instructorAccessStudentNotification_shouldFail() {","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.STUDENT.toString(),","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess(requestParams);","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_instructorAccessInstructorNotification_shouldSucceed() {","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess(requestParams);","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_studentAccessInstructorNotification_shouldFail() {","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"        loginAsStudent(GOOGLE_ID);","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess(requestParams);","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_studentAccessStudentNotification_shouldSucceed() {","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"InfinityTwo"},"content":"        loginAsStudent(GOOGLE_ID);","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.STUDENT.toString(),","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess(requestParams);","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_unknownTargetUser_shouldFail() {","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, \"unknown\",","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailureAcl(requestParams);","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_adminAccessAllNotification_shouldSucceed() {","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"InfinityTwo"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, null,","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess(requestParams);","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_withValidUserTypeForNonAdmin_shouldReturnData() {","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotification\u003e testNotifications \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"InfinityTwo"},"content":"        int expectedNumberOfNotifications \u003d UNREAD_NOTIFICATION_COUNT + READ_NOTIFICATION_COUNT;","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"InfinityTwo"},"content":"        for (int i \u003d 0; i \u003c expectedNumberOfNotifications; i++) {","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"InfinityTwo"},"content":"            testNotifications.add(getTypicalNotificationWithId());","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"InfinityTwo"},"content":"        }","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getActiveNotificationsByTargetUser(NotificationTargetUser.INSTRUCTOR))","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"InfinityTwo"},"content":"                .thenReturn(testNotifications);","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"InfinityTwo"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"InfinityTwo"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"InfinityTwo"},"content":"        NotificationsData output \u003d (NotificationsData) jsonResult.getOutput();","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotificationData\u003e notifications \u003d output.getNotifications();","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"InfinityTwo"},"content":"        // should fetch correct number of notifications","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expectedNumberOfNotifications, notifications.size());","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"InfinityTwo"},"content":"    public void testExecute_withoutUserTypeForAdmin_shouldReturnAllNotifications() {","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"InfinityTwo"},"content":"        final int expectedNumberOfNotifications \u003d 5;","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"InfinityTwo"},"content":"        Notification testNotification \u003d getTypicalNotificationWithId();","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"InfinityTwo"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotification\u003e testNotifications \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"InfinityTwo"},"content":"        for (int i \u003d 0; i \u003c expectedNumberOfNotifications; i++) {","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"InfinityTwo"},"content":"            testNotifications.add(getTypicalNotificationWithId());","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"InfinityTwo"},"content":"        }","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getAllNotifications()).thenReturn(testNotifications);","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getActiveNotificationsByTargetUser(testNotification.getTargetUser()))","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"InfinityTwo"},"content":"                .thenReturn(testNotifications);","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, null,","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"InfinityTwo"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"InfinityTwo"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"InfinityTwo"},"content":"        NotificationsData output \u003d (NotificationsData) jsonResult.getOutput();","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotificationData\u003e notificationOutput \u003d output.getNotifications();","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expectedNumberOfNotifications, mockLogic.getAllNotifications().size());","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expectedNumberOfNotifications, notificationOutput.size());","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"InfinityTwo"},"content":"        NotificationData expected \u003d new NotificationData(testNotifications.get(0));","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"InfinityTwo"},"content":"        NotificationData firstNotification \u003d notificationOutput.get(0);","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"InfinityTwo"},"content":"        verifyNotificationEquals(expected, firstNotification);","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"InfinityTwo"},"content":"        // notification\u0027s shown attribute should not be updated","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotification\u003e notificationToCheck \u003d","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"InfinityTwo"},"content":"                mockLogic.getActiveNotificationsByTargetUser(testNotification.getTargetUser());","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"InfinityTwo"},"content":"        notificationToCheck.forEach(n -\u003e assertFalse(n.isShown()));","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"InfinityTwo"},"content":"    public void testExecute_withoutUserTypeForNonAdmin_shouldFail() {","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"InfinityTwo"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"InfinityTwo"},"content":"        assertThrows(AssertionError.class, action::execute);","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"InfinityTwo"},"content":"    public void testExecute_invalidUserType_shouldFail() {","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"InfinityTwo"},"content":"        // when usertype is GENERAL","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(Const.ParamsNames.NOTIFICATION_TARGET_USER,","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"InfinityTwo"},"content":"                NotificationTargetUser.GENERAL.toString(),","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL,","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"InfinityTwo"},"content":"                String.valueOf(true));","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"InfinityTwo"},"content":"        // when usertype is a random string","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(Const.ParamsNames.NOTIFICATION_TARGET_USER,","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"InfinityTwo"},"content":"                \"invalid string\",","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL,","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"InfinityTwo"},"content":"                String.valueOf(true));","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"InfinityTwo"},"content":"    public void testExecute_withFalseIsFetchingAll_shouldUpdateShownAndReturnUnreadNotifications() {","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotification\u003e testAllNotifications \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotification\u003e testUnreadNotifications \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"InfinityTwo"},"content":"        Set\u003cString\u003e readNotificationsId;","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"InfinityTwo"},"content":"        for (int i \u003d 0; i \u003c UNREAD_NOTIFICATION_COUNT; i++) {","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"InfinityTwo"},"content":"            testUnreadNotifications.add(getTypicalNotificationWithId());","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"InfinityTwo"},"content":"        }","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"InfinityTwo"},"content":"        for (int i \u003d 0; i \u003c READ_NOTIFICATION_COUNT; i++) {","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"InfinityTwo"},"content":"            Notification readNotification \u003d getTypicalNotificationWithId();","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"InfinityTwo"},"content":"            readNotification.setShown();","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"InfinityTwo"},"content":"            testAllNotifications.add(readNotification);","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"InfinityTwo"},"content":"        }","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"InfinityTwo"},"content":"        readNotificationsId \u003d testAllNotifications.stream()","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"InfinityTwo"},"content":"                .map(n -\u003e n.getId().toString())","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"InfinityTwo"},"content":"                .collect(Collectors.toSet());","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"InfinityTwo"},"content":"        testAllNotifications.addAll(testUnreadNotifications);","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getAllNotifications()).thenReturn(testAllNotifications);","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getActiveNotificationsByTargetUser(NotificationTargetUser.INSTRUCTOR))","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"InfinityTwo"},"content":"                .thenReturn(testUnreadNotifications);","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(false),","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"InfinityTwo"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"InfinityTwo"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"InfinityTwo"},"content":"        NotificationsData output \u003d (NotificationsData) jsonResult.getOutput();","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotificationData\u003e notifications \u003d output.getNotifications();","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"InfinityTwo"},"content":"        verifyDoesNotContainNotifications(notifications, readNotificationsId);","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"InfinityTwo"},"content":"        // should update notification has shown attribute","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotification\u003e activeNotifications \u003d","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"InfinityTwo"},"content":"                mockLogic.getActiveNotificationsByTargetUser(NotificationTargetUser.INSTRUCTOR);","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"InfinityTwo"},"content":"        activeNotifications \u003d activeNotifications.stream()","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"InfinityTwo"},"content":"                .filter(n -\u003e !readNotificationsId.contains(n.getId().toString()))","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"InfinityTwo"},"content":"                .collect(Collectors.toList());","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"InfinityTwo"},"content":"        activeNotifications.forEach(n -\u003e assertTrue(n.isShown()));","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"InfinityTwo"},"content":"    public void testExecute_withoutIsFetchingAll_shouldUpdateShownAndReturnUnreadNotifications() {","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotification\u003e testAllNotifications \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotification\u003e testUnreadNotifications \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"InfinityTwo"},"content":"        Set\u003cString\u003e readNotificationsId;","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"InfinityTwo"},"content":"        for (int i \u003d 0; i \u003c READ_NOTIFICATION_COUNT; i++) {","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"InfinityTwo"},"content":"            Notification readNotification \u003d getTypicalNotificationWithId();","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"InfinityTwo"},"content":"            readNotification.setShown();","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"InfinityTwo"},"content":"            testAllNotifications.add(readNotification);","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"InfinityTwo"},"content":"        }","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"InfinityTwo"},"content":"        readNotificationsId \u003d testAllNotifications.stream()","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"InfinityTwo"},"content":"                .map(n -\u003e n.getId().toString())","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"InfinityTwo"},"content":"                .collect(Collectors.toSet());","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getActiveNotificationsByTargetUser(NotificationTargetUser.INSTRUCTOR))","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"InfinityTwo"},"content":"                .thenReturn(testUnreadNotifications);","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"InfinityTwo"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"InfinityTwo"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"InfinityTwo"},"content":"        NotificationsData output \u003d (NotificationsData) jsonResult.getOutput();","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotificationData\u003e notifications \u003d output.getNotifications();","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"InfinityTwo"},"content":"        verifyDoesNotContainNotifications(notifications, readNotificationsId);","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"InfinityTwo"},"content":"    public void testExecute_withInvalidIsFetchingAll_shouldFail() {","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(GOOGLE_ID);","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"InfinityTwo"},"content":"        String[] requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, \"random-value\",","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(requestParams);","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"InfinityTwo"},"content":"    private void verifyNotificationEquals(NotificationData expected, NotificationData actual) {","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getNotificationId(), actual.getNotificationId());","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getStyle(), actual.getStyle());","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getTargetUser(), actual.getTargetUser());","isFullCredit":false},{"lineNumber":295,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getTitle(), actual.getTitle());","isFullCredit":false},{"lineNumber":296,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getMessage(), actual.getMessage());","isFullCredit":false},{"lineNumber":297,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getStartTimestamp(), actual.getStartTimestamp());","isFullCredit":false},{"lineNumber":298,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(expected.getEndTimestamp(), actual.getEndTimestamp());","isFullCredit":false},{"lineNumber":299,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":300,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":301,"author":{"gitId":"InfinityTwo"},"content":"    private void verifyDoesNotContainNotifications(List\u003cNotificationData\u003e notifications, Set\u003cString\u003e readIds) {","isFullCredit":false},{"lineNumber":302,"author":{"gitId":"InfinityTwo"},"content":"        for (NotificationData n : notifications) {","isFullCredit":false},{"lineNumber":303,"author":{"gitId":"InfinityTwo"},"content":"            assertFalse(readIds.contains(n.getNotificationId()));","isFullCredit":false},{"lineNumber":304,"author":{"gitId":"InfinityTwo"},"content":"        }","isFullCredit":false},{"lineNumber":305,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":306,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":306}},{"path":"src/test/java/teammates/sqlui/webapi/GetReadNotificationsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"import java.util.ArrayList;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"import java.util.stream.Collectors;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.Notification;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.output.ReadNotificationsData;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.GetReadNotificationsAction;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.JsonResult;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link GetReadNotificationsAction}.","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":"public class GetReadNotificationsActionTest extends BaseActionTest\u003cGetReadNotificationsAction\u003e {","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":"    /** Number of read notifications used for testing. */","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":"    public static final int READ_NOTIFICATION_COUNT \u003d 2;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"        return Const.ResourceURIs.NOTIFICATION_READ;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"        return GET;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_getReadNotificationsAsInstructor_shouldSucceed() {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"        Instructor instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cNotification\u003e testNotifications \u003d new ArrayList\u003c\u003e();","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(instructor.getGoogleId());","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"        for (int i \u003d 0; i \u003c READ_NOTIFICATION_COUNT; i++) {","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"            testNotifications.add(getTypicalNotificationWithId());","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"        }","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cUUID\u003e testNotificationIds \u003d testNotifications.stream().map(Notification::getId).collect(Collectors.toList());","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getReadNotificationsId(instructor.getGoogleId())).thenReturn(testNotificationIds);","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"        GetReadNotificationsAction action \u003d getAction();","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"        ReadNotificationsData output \u003d (ReadNotificationsData) jsonResult.getOutput();","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cString\u003e readNotificationsData \u003d output.getReadNotifications();","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"        readNotificationsData.forEach(notificationId -\u003e","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"                assertTrue(testNotificationIds.contains(UUID.fromString(notificationId))));","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(READ_NOTIFICATION_COUNT, readNotificationsData.size());","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":60}},{"path":"src/test/java/teammates/sqlui/webapi/GetTimeZonesActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.output.TimeZonesData;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.GetTimeZonesAction;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.JsonResult;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link GetTimeZonesAction}.","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"public class GetTimeZonesActionTest extends BaseActionTest\u003cGetTimeZonesAction\u003e {","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"        return Const.ResourceURIs.TIMEZONE;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":"        return GET;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_maintainers_canAccess() {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"        loginAsMaintainer();","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_instructor_cannotAccess() {","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(Const.ParamsNames.INSTRUCTOR_ID);","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"        loginAsStudent(Const.ParamsNames.STUDENT_ID);","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_unregistered_cannotAccess() {","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"        loginAsUnregistered(Const.ParamsNames.USER_ID);","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_normalCase_shouldSucceed() {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"InfinityTwo"},"content":"        GetTimeZonesAction a \u003d getAction();","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"InfinityTwo"},"content":"        JsonResult r \u003d getJsonResult(a);","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"InfinityTwo"},"content":"        TimeZonesData output \u003d (TimeZonesData) r.getOutput();","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"InfinityTwo"},"content":"        // This test does not check the timezone database used is the latest","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"InfinityTwo"},"content":"        // Only check that the version number is returned, and some sample values for timezone offset","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"InfinityTwo"},"content":"        assertNotNull(output.getVersion());","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"        // There is a quirk in the ETC/GMT time zones due to the tzdb using POSIX-style signs in the zone names and the","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"InfinityTwo"},"content":"        // output abbreviations. POSIX has positive signs west of Greenwich, while we are used to positive signs east","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"InfinityTwo"},"content":"        // of Greenwich in practice. For example, TZ\u003d\u0027Etc/GMT+8\u0027 uses the abbreviation \"GMT+8\" and corresponds to 8","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"InfinityTwo"},"content":"        // hours behind UTC (i.e. west of Greenwich) even though many people would expect it to mean 8 hours ahead of","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"InfinityTwo"},"content":"        // UTC (i.e. east of Greenwich; like Singapore or China).","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"InfinityTwo"},"content":"        // (adapted from tzdb table comments)","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(8 * 60 * 60, output.getOffsets().get(\"Etc/GMT-8\").intValue());","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(-5 * 60 * 60, output.getOffsets().get(\"Etc/GMT+5\").intValue());","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(11 * 60 * 60, output.getOffsets().get(\"Etc/GMT-11\").intValue());","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(0, output.getOffsets().get(\"Etc/GMT+0\").intValue());","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":83}},{"path":"src/test/java/teammates/sqlui/webapi/GetUsageStatisticsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import java.time.Duration;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"import java.time.temporal.ChronoUnit;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.GetUsageStatisticsAction;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link GetUsageStatisticsAction}.","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"public class GetUsageStatisticsActionTest extends BaseActionTest\u003cGetUsageStatisticsAction\u003e {","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"    private static final long START_TIME_FOR_FAIL_CASES \u003d Instant.now().minusSeconds(60).toEpochMilli();","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"    private static final long END_TIME_FOR_FAIL_CASES \u003d START_TIME_FOR_FAIL_CASES - 1000;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":"    protected String getActionUri() {","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":"        return Const.ResourceURIs.USAGE_STATISTICS;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":"    protected String getRequestMethod() {","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":"        return GET;","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_maintainers_canAccess() {","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"        loginAsMaintainer();","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_instructor_cannotAccess() {","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(Const.ParamsNames.INSTRUCTOR_ID);","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"        loginAsStudent(Const.ParamsNames.STUDENT_ID);","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_unregistered_cannotAccess() {","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"InfinityTwo"},"content":"        loginAsUnregistered(Const.ParamsNames.USER_ID);","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"InfinityTwo"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"InfinityTwo"},"content":"    public void setUp() {","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"InfinityTwo"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_success() {","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"InfinityTwo"},"content":"        GetUsageStatisticsAction action \u003d getAction(","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_STARTTIME, String.valueOf(START_TIME_FOR_FAIL_CASES),","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_ENDTIME, String.valueOf(START_TIME_FOR_FAIL_CASES + 1000)","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"InfinityTwo"},"content":"        );","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"InfinityTwo"},"content":"        // For now, we stop at simply checking that the request is successful,","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"InfinityTwo"},"content":"        // as we do not have means to reliably create test usage attributes data yet.","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"InfinityTwo"},"content":"        getJsonResult(action);","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_endTimeBeforeStart_shouldFail() {","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"InfinityTwo"},"content":"        String[] paramsInvalid \u003d {","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_STARTTIME, String.valueOf(START_TIME_FOR_FAIL_CASES),","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_ENDTIME, String.valueOf(END_TIME_FOR_FAIL_CASES),","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(paramsInvalid);","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_invalidSearchStartTime_shouldFail() {","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"InfinityTwo"},"content":"        String[] paramsInvalid \u003d {","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_STARTTIME, \"abc\",","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_ENDTIME, String.valueOf(END_TIME_FOR_FAIL_CASES),","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(paramsInvalid);","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_invalidSearchEndTime_shouldFail() {","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"InfinityTwo"},"content":"        String[] paramsInvalid \u003d {","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_STARTTIME, String.valueOf(START_TIME_FOR_FAIL_CASES),","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_ENDTIME, \" \",","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(paramsInvalid);","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_searchWindowTooLong_shouldFail() {","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"InfinityTwo"},"content":"        long daysExceedingSearchWindow \u003d 200L;","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"InfinityTwo"},"content":"        long startTime \u003d Instant.now().minus(daysExceedingSearchWindow, ChronoUnit.DAYS).toEpochMilli();","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"InfinityTwo"},"content":"        long millisExceedingSearchWindow \u003d Duration.ofDays(daysExceedingSearchWindow).toMillis();","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"InfinityTwo"},"content":"        String[] paramsInvalid \u003d {","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_STARTTIME, String.valueOf(startTime),","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_ENDTIME, String.valueOf(startTime + millisExceedingSearchWindow),","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(paramsInvalid);","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"InfinityTwo"},"content":"    void testExecute_endTimeAfterCurrentTime_shouldFail() {","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"InfinityTwo"},"content":"        long millisExceedingNow \u003d Instant.now().plusMillis(1000).toEpochMilli();","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"InfinityTwo"},"content":"        String[] paramsInvalid \u003d {","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_STARTTIME, String.valueOf(START_TIME_FOR_FAIL_CASES),","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.QUERY_LOGS_ENDTIME, String.valueOf(millisExceedingNow),","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(paramsInvalid);","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":135}},{"path":"src/test/java/teammates/sqlui/webapi/MarkNotificationAsReadActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.ArgumentMatchers.any;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.ArgumentMatchers.eq;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"import java.util.List;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.exception.EntityDoesNotExistException;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.exception.InvalidParametersException;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.Notification;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.output.ReadNotificationsData;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.request.MarkNotificationAsReadRequest;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.EntityNotFoundException;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.JsonResult;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.MarkNotificationAsReadAction;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link MarkNotificationAsReadAction}.","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"public class MarkNotificationAsReadActionTest extends BaseActionTest\u003cMarkNotificationAsReadAction\u003e {","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"    Instructor instructor;","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"    String instructorId;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"    Notification testNotification;","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"        return Const.ResourceURIs.NOTIFICATION_READ;","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"        return POST;","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"        instructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"        instructorId \u003d instructor.getGoogleId();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"        testNotification \u003d getTypicalNotificationWithId();","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(instructorId);","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_markNotificationAsRead_shouldSucceed() throws Exception {","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.updateReadNotifications(","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"                instructorId,","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"                testNotification.getId(),","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"                testNotification.getEndTime()","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"        )).thenReturn(List.of(testNotification.getId()));","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"        MarkNotificationAsReadRequest reqBody \u003d new MarkNotificationAsReadRequest(","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"                testNotification.getId().toString(), testNotification.getEndTime().toEpochMilli());","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"InfinityTwo"},"content":"        MarkNotificationAsReadAction action \u003d getAction(reqBody);","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"InfinityTwo"},"content":"        JsonResult actionOutput \u003d getJsonResult(action);","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"InfinityTwo"},"content":"        ReadNotificationsData response \u003d (ReadNotificationsData) actionOutput.getOutput();","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"InfinityTwo"},"content":"        List\u003cString\u003e readNotifications \u003d response.getReadNotifications();","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"InfinityTwo"},"content":"        assertTrue(readNotifications.contains(testNotification.getId().toString()));","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_markInvalidNotificationAsRead_shouldThrowIllegalArgumentError() {","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"InfinityTwo"},"content":"        MarkNotificationAsReadRequest reqBody \u003d","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"InfinityTwo"},"content":"                new MarkNotificationAsReadRequest(\"invalid id\", testNotification.getEndTime().toEpochMilli());","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"InfinityTwo"},"content":"        MarkNotificationAsReadAction action \u003d getAction(reqBody);","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"InfinityTwo"},"content":"        assertThrows(IllegalArgumentException.class, () -\u003e action.execute());","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_markNonExistentNotificationAsRead_shouldFail() throws Exception {","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"InfinityTwo"},"content":"        UUID nonExistentNotificationId \u003d UUID.randomUUID();","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"InfinityTwo"},"content":"        MarkNotificationAsReadRequest reqBody \u003d","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"InfinityTwo"},"content":"                new MarkNotificationAsReadRequest(","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"InfinityTwo"},"content":"                        nonExistentNotificationId.toString(),","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"InfinityTwo"},"content":"                        testNotification.getEndTime().toEpochMilli());","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.updateReadNotifications(","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"InfinityTwo"},"content":"                any(),","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"InfinityTwo"},"content":"                eq(nonExistentNotificationId),","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"InfinityTwo"},"content":"                eq(testNotification.getEndTime()))).thenThrow(new EntityDoesNotExistException(\"\"));","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"InfinityTwo"},"content":"        MarkNotificationAsReadAction action \u003d getAction(reqBody);","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"InfinityTwo"},"content":"        assertThrows(EntityNotFoundException.class, () -\u003e action.execute());","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_notificationEndTimeIsZero_shouldFail() {","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"InfinityTwo"},"content":"        MarkNotificationAsReadRequest reqBody \u003d","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"InfinityTwo"},"content":"                new MarkNotificationAsReadRequest(testNotification.getId().toString(), 0L);","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpRequestBodyFailure(reqBody);","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_markExpiredNotificationAsRead_shouldFail() throws Exception {","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.updateReadNotifications(","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"InfinityTwo"},"content":"                instructorId,","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"InfinityTwo"},"content":"                testNotification.getId(),","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"InfinityTwo"},"content":"                testNotification.getEndTime()","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"InfinityTwo"},"content":"        )).thenThrow(new InvalidParametersException(\"Trying to mark an expired notification as read.\"));","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"InfinityTwo"},"content":"        MarkNotificationAsReadRequest reqBody \u003d new MarkNotificationAsReadRequest(","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"InfinityTwo"},"content":"                testNotification.getId().toString(),","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"InfinityTwo"},"content":"                testNotification.getEndTime().toEpochMilli());","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"InfinityTwo"},"content":"        MarkNotificationAsReadAction action \u003d getAction(reqBody);","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"InfinityTwo"},"content":"        assertThrows(InvalidHttpRequestBodyException.class, () -\u003e action.execute());","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":123}},{"path":"src/test/java/teammates/sqlui/webapi/UpdateFeedbackQuestionActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BunnyHoppp"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"BunnyHoppp"},"content":"import static org.mockito.Mockito.any;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"BunnyHoppp"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"BunnyHoppp"},"content":"import static teammates.common.util.Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_OBSERVER;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"BunnyHoppp"},"content":"import java.util.ArrayList;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"BunnyHoppp"},"content":"import java.util.Arrays;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"BunnyHoppp"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"BunnyHoppp"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"BunnyHoppp"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.questions.FeedbackContributionQuestionDetails;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.exception.InvalidParametersException;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.util.JsonUtils;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.FeedbackSession;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.output.FeedbackQuestionData;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.output.FeedbackVisibilityType;","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.output.NumberOfEntitiesToGiveFeedbackToSetting;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.request.FeedbackQuestionUpdateRequest;","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.webapi.JsonResult;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.webapi.UpdateFeedbackQuestionAction;","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"BunnyHoppp"},"content":"/**","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"BunnyHoppp"},"content":" * SUT: {@link UpdateFeedbackQuestionAction}.","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"BunnyHoppp"},"content":" */","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"BunnyHoppp"},"content":"public class UpdateFeedbackQuestionActionTest extends BaseActionTest\u003cUpdateFeedbackQuestionAction\u003e {","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"BunnyHoppp"},"content":"    private Instructor typicalInstructor;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"BunnyHoppp"},"content":"    private Course typicalCourse;","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"BunnyHoppp"},"content":"    private FeedbackSession typicalFeedbackSession;","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"BunnyHoppp"},"content":"    private FeedbackQuestion typicalFeedbackQuestion;","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"BunnyHoppp"},"content":"    @Override","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"BunnyHoppp"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"BunnyHoppp"},"content":"        return Const.ResourceURIs.QUESTION;","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"BunnyHoppp"},"content":"    @Override","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"BunnyHoppp"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"BunnyHoppp"},"content":"        return PUT;","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"BunnyHoppp"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"BunnyHoppp"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"BunnyHoppp"},"content":"        typicalInstructor \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"BunnyHoppp"},"content":"        typicalCourse \u003d typicalInstructor.getCourse();","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"BunnyHoppp"},"content":"        typicalFeedbackSession \u003d getTypicalFeedbackSessionForCourse(typicalCourse);","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"BunnyHoppp"},"content":"        typicalFeedbackQuestion \u003d getTypicalFeedbackQuestionForSession(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_typicalCase_success() throws Exception {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(typicalFeedbackQuestion);","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestion updatedQuestion \u003d getUpdatedFeedbackQuestion();","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionUpdateRequest updateRequest \u003d getTypicalTextQuestionUpdateRequest();","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.updateFeedbackQuestionCascade(any(UUID.class), any(FeedbackQuestionUpdateRequest.class)))","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(updatedQuestion);","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"BunnyHoppp"},"content":"        UpdateFeedbackQuestionAction a \u003d getAction(updateRequest, params);","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"BunnyHoppp"},"content":"        JsonResult r \u003d getJsonResult(a);","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionData response \u003d (FeedbackQuestionData) r.getOutput();","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedQuestion.getQuestionNumber().intValue(), response.getQuestionNumber());","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(2, updatedQuestion.getQuestionNumber().intValue());","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedQuestion.getQuestionDetailsCopy().getQuestionText(), response.getQuestionBrief());","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(\"this is the brief\", updatedQuestion.getQuestionDetailsCopy().getQuestionText());","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedQuestion.getQuestionDetailsCopy().getQuestionType(), response.getQuestionType());","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(FeedbackQuestionType.TEXT, updatedQuestion.getQuestionDetailsCopy().getQuestionType());","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(JsonUtils.toJson(updatedQuestion.getQuestionDetailsCopy()),","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"BunnyHoppp"},"content":"                JsonUtils.toJson(response.getQuestionDetails()));","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(800, ((FeedbackTextQuestionDetails)","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"BunnyHoppp"},"content":"                updatedQuestion.getQuestionDetailsCopy()).getRecommendedLength().intValue());","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedQuestion.getGiverType(), response.getGiverType());","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(FeedbackParticipantType.STUDENTS, updatedQuestion.getGiverType());","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedQuestion.getRecipientType(), response.getRecipientType());","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(FeedbackParticipantType.INSTRUCTORS, updatedQuestion.getRecipientType());","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM,","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"BunnyHoppp"},"content":"                response.getNumberOfEntitiesToGiveFeedbackToSetting());","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(2, updatedQuestion.getNumOfEntitiesToGiveFeedbackTo().intValue());","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(response.getShowResponsesTo().isEmpty());","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(updatedQuestion.getShowResponsesTo().isEmpty());","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(response.getShowGiverNameTo().isEmpty());","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(updatedQuestion.getShowGiverNameTo().isEmpty());","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(response.getShowRecipientNameTo().isEmpty());","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"BunnyHoppp"},"content":"        assertTrue(updatedQuestion.getShowRecipientNameTo().isEmpty());","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_changeVisibility_success() throws Exception {","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(typicalFeedbackQuestion);","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestion updatedQuestion \u003d getUpdatedFeedbackQuestion();","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"BunnyHoppp"},"content":"        updatedQuestion.setGiverType(FeedbackParticipantType.INSTRUCTORS);","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"BunnyHoppp"},"content":"        updatedQuestion.setRecipientType(FeedbackParticipantType.TEAMS);","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"BunnyHoppp"},"content":"        updatedQuestion.setShowResponsesTo(Arrays.asList(FeedbackParticipantType.RECEIVER));","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"BunnyHoppp"},"content":"        updatedQuestion.setShowGiverNameTo(Arrays.asList(FeedbackParticipantType.RECEIVER));","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"BunnyHoppp"},"content":"        updatedQuestion.setShowRecipientNameTo(Arrays.asList(FeedbackParticipantType.RECEIVER));","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.updateFeedbackQuestionCascade(any(UUID.class), any(FeedbackQuestionUpdateRequest.class)))","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(updatedQuestion);","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionUpdateRequest updateRequest \u003d getTypicalTextQuestionUpdateRequest();","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setGiverType(FeedbackParticipantType.INSTRUCTORS);","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setRecipientType(FeedbackParticipantType.TEAMS);","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setShowResponsesTo(Arrays.asList(FeedbackVisibilityType.RECIPIENT));","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setShowGiverNameTo(Arrays.asList(FeedbackVisibilityType.RECIPIENT));","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setShowRecipientNameTo(Arrays.asList(FeedbackVisibilityType.RECIPIENT));","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"BunnyHoppp"},"content":"        UpdateFeedbackQuestionAction a \u003d getAction(updateRequest, params);","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"BunnyHoppp"},"content":"        JsonResult r \u003d getJsonResult(a);","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionData response \u003d (FeedbackQuestionData) r.getOutput();","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedQuestion.getGiverType(), response.getGiverType());","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(FeedbackParticipantType.INSTRUCTORS, updatedQuestion.getGiverType());","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedQuestion.getRecipientType(), response.getRecipientType());","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(FeedbackParticipantType.TEAMS, updatedQuestion.getRecipientType());","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(Arrays.asList(FeedbackVisibilityType.RECIPIENT), response.getShowResponsesTo());","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(Arrays.asList(FeedbackParticipantType.RECEIVER), updatedQuestion.getShowResponsesTo());","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(Arrays.asList(FeedbackVisibilityType.RECIPIENT), response.getShowGiverNameTo());","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(Arrays.asList(FeedbackParticipantType.RECEIVER), updatedQuestion.getShowGiverNameTo());","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(Arrays.asList(FeedbackVisibilityType.RECIPIENT), response.getShowRecipientNameTo());","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(Arrays.asList(FeedbackParticipantType.RECEIVER), updatedQuestion.getShowRecipientNameTo());","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_invalidQuestionNumber_throwsInvalidHttpRequestBodyException() {","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(typicalFeedbackQuestion);","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionUpdateRequest updateRequest \u003d getTypicalTextQuestionUpdateRequest();","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setQuestionNumber(-1);","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpRequestBodyFailure(updateRequest, params);","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_invalidGiverRecipientType_throwsInvalidHttpRequestBodyException() throws Exception {","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackContributionQuestionDetails questionDetails \u003d new FeedbackContributionQuestionDetails();","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestion contributionQuestion \u003d FeedbackQuestion.makeQuestion(typicalFeedbackSession, 2,","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"BunnyHoppp"},"content":"                \"contribution question\", FeedbackParticipantType.STUDENTS,","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"BunnyHoppp"},"content":"                FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF, 4,","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"BunnyHoppp"},"content":"                new ArrayList\u003c\u003e(), new ArrayList\u003c\u003e(), new ArrayList\u003c\u003e(), questionDetails);","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(contributionQuestion.getId())).thenReturn(contributionQuestion);","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionUpdateRequest updateRequest \u003d getTypicalTextQuestionUpdateRequest();","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setQuestionType(FeedbackQuestionType.CONTRIB);","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setGiverType(FeedbackParticipantType.INSTRUCTORS);","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setRecipientType(FeedbackParticipantType.INSTRUCTORS);","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.updateFeedbackQuestionCascade(any(UUID.class), any(FeedbackQuestionUpdateRequest.class)))","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"BunnyHoppp"},"content":"                .thenThrow(InvalidParametersException.class);","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, contributionQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpRequestBodyFailure(updateRequest, params);","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_missingParameters_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d {Const.ParamsNames.FEEDBACK_QUESTION_ID, null,","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"BunnyHoppp"},"content":"    void testSpecificAccessControl_nonExistentFeedbackQuestion_cannotAccess() {","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(null);","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"BunnyHoppp"},"content":"        String[] submissionParams \u003d {","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(submissionParams);","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"BunnyHoppp"},"content":"    void testSpecificAccessControl_withModifySessionPrivilege_canAccess() {","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(typicalFeedbackQuestion);","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackQuestion.getFeedbackSession().getName(),","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"BunnyHoppp"},"content":"                typicalFeedbackQuestion.getCourseId())).thenReturn(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getInstructorByGoogleId(typicalCourse.getId(), typicalInstructor.getGoogleId()))","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(typicalInstructor);","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"BunnyHoppp"},"content":"        String[] submissionParams \u003d {","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(typicalInstructor.getGoogleId());","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCanAccess(submissionParams);","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"BunnyHoppp"},"content":"    void testSpecificAccessControl_withoutModifySessionPrivilege_cannotAccess() {","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"BunnyHoppp"},"content":"        // create instructor without modify session privilege","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"BunnyHoppp"},"content":"        Instructor instructorWithoutAccess \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"BunnyHoppp"},"content":"        instructorWithoutAccess.setPrivileges(new InstructorPrivileges(INSTRUCTOR_PERMISSION_ROLE_OBSERVER));","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackQuestion(typicalFeedbackQuestion.getId())).thenReturn(typicalFeedbackQuestion);","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getFeedbackSession(typicalFeedbackQuestion.getFeedbackSession().getName(),","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"BunnyHoppp"},"content":"                typicalFeedbackQuestion.getCourseId())).thenReturn(typicalFeedbackSession);","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getInstructorByGoogleId(typicalCourse.getId(), typicalInstructor.getGoogleId()))","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(instructorWithoutAccess);","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"BunnyHoppp"},"content":"        String[] submissionParams \u003d {","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.FEEDBACK_QUESTION_ID, typicalFeedbackQuestion.getId().toString(),","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(instructorWithoutAccess.getGoogleId());","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(submissionParams);","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"BunnyHoppp"},"content":"    private FeedbackQuestionUpdateRequest getTypicalTextQuestionUpdateRequest() {","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestionUpdateRequest updateRequest \u003d new FeedbackQuestionUpdateRequest();","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setQuestionNumber(2);","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setQuestionBrief(\"this is the brief\");","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setQuestionDescription(\"this is the description\");","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackTextQuestionDetails textQuestionDetails \u003d new FeedbackTextQuestionDetails();","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"BunnyHoppp"},"content":"        textQuestionDetails.setRecommendedLength(800);","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setQuestionDetails(textQuestionDetails);","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setQuestionType(FeedbackQuestionType.TEXT);","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setGiverType(FeedbackParticipantType.STUDENTS);","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setRecipientType(FeedbackParticipantType.INSTRUCTORS);","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setNumberOfEntitiesToGiveFeedbackToSetting(NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM);","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setCustomNumberOfEntitiesToGiveFeedbackTo(2);","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setShowResponsesTo(new ArrayList\u003c\u003e());","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setShowGiverNameTo(new ArrayList\u003c\u003e());","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"BunnyHoppp"},"content":"        updateRequest.setShowRecipientNameTo(new ArrayList\u003c\u003e());","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"BunnyHoppp"},"content":"        return updateRequest;","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"BunnyHoppp"},"content":"    private FeedbackQuestion getUpdatedFeedbackQuestion() {","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackTextQuestionDetails textQuestionDetails \u003d","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"BunnyHoppp"},"content":"                new FeedbackTextQuestionDetails(\"this is the brief\");","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"BunnyHoppp"},"content":"        textQuestionDetails.setRecommendedLength(800);","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"BunnyHoppp"},"content":"        FeedbackQuestion updatedQuestion \u003d FeedbackQuestion.makeQuestion(typicalFeedbackSession, 2,","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"BunnyHoppp"},"content":"                \"this is the description\", FeedbackParticipantType.STUDENTS,","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"BunnyHoppp"},"content":"                FeedbackParticipantType.INSTRUCTORS, 2, new ArrayList\u003c\u003e(), new ArrayList\u003c\u003e(),","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"BunnyHoppp"},"content":"                new ArrayList\u003c\u003e(),","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"BunnyHoppp"},"content":"                textQuestionDetails);","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"BunnyHoppp"},"content":"        updatedQuestion.setId(typicalFeedbackQuestion.getId());","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"BunnyHoppp"},"content":"        return updatedQuestion;","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"BunnyHoppp"},"content":"}","isFullCredit":false}],"authorContributionMap":{"BunnyHoppp":282}},{"path":"src/test/java/teammates/sqlui/webapi/UpdateInstructorActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BunnyHoppp"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"BunnyHoppp"},"content":"import static org.mockito.ArgumentMatchers.any;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"BunnyHoppp"},"content":"import static org.mockito.Mockito.times;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"BunnyHoppp"},"content":"import static org.mockito.Mockito.verify;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"BunnyHoppp"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"BunnyHoppp"},"content":"import static teammates.common.datatransfer.InstructorPermissionRole.getEnum;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"BunnyHoppp"},"content":"import static teammates.common.util.Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_CUSTOM;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"BunnyHoppp"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"BunnyHoppp"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.exception.InstructorUpdateException;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.exception.InvalidParametersException;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.common.util.TaskWrapper;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.storage.sqlentity.Student;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.output.InstructorData;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.request.InstructorCreateRequest;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.webapi.JsonResult;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"BunnyHoppp"},"content":"import teammates.ui.webapi.UpdateInstructorAction;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"BunnyHoppp"},"content":"/**","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"BunnyHoppp"},"content":" * SUT: {@link UpdateInstructorAction}.","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"BunnyHoppp"},"content":" */","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"BunnyHoppp"},"content":"public class UpdateInstructorActionTest extends BaseActionTest\u003cUpdateInstructorAction\u003e {","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"BunnyHoppp"},"content":"    private Course typicalCourse;","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"BunnyHoppp"},"content":"    private Instructor typicalInstructorToUpdate;","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"BunnyHoppp"},"content":"    @Override","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"BunnyHoppp"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"BunnyHoppp"},"content":"        return Const.ResourceURIs.INSTRUCTOR;","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"BunnyHoppp"},"content":"    @Override","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"BunnyHoppp"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"BunnyHoppp"},"content":"        return PUT;","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"BunnyHoppp"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"BunnyHoppp"},"content":"    void setUpMethod() {","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"BunnyHoppp"},"content":"        typicalCourse \u003d getTypicalCourse();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"BunnyHoppp"},"content":"        typicalInstructorToUpdate \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_typicalCase_success() throws Exception {","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"BunnyHoppp"},"content":"        String instructorToUpdateId \u003d typicalInstructorToUpdate.getGoogleId();","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"BunnyHoppp"},"content":"        String instructorToUpdateDisplayName \u003d typicalInstructorToUpdate.getDisplayName();","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(instructorToUpdateId);","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorName \u003d \"New Instructor\";","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorEmail \u003d \"newinstructor@teammates.tmt\";","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorRole \u003d Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER;","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"BunnyHoppp"},"content":"        Instructor updatedInstructor \u003d new Instructor(typicalCourse, updatedInstructorName, updatedInstructorEmail,","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"BunnyHoppp"},"content":"                false, null, getEnum(updatedInstructorRole),","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"BunnyHoppp"},"content":"                new InstructorPrivileges(updatedInstructorRole));","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"BunnyHoppp"},"content":"        InstructorCreateRequest requestBody \u003d new InstructorCreateRequest(instructorToUpdateId, updatedInstructorName,","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"BunnyHoppp"},"content":"                updatedInstructorEmail, updatedInstructorRole,","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"BunnyHoppp"},"content":"                instructorToUpdateDisplayName, typicalInstructorToUpdate.isDisplayedToStudents());","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.updateInstructorCascade(any(String.class), any(InstructorCreateRequest.class)))","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(updatedInstructor);","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"BunnyHoppp"},"content":"        UpdateInstructorAction updateInstructorAction \u003d getAction(requestBody, params);","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"BunnyHoppp"},"content":"        JsonResult r \u003d getJsonResult(updateInstructorAction);","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"BunnyHoppp"},"content":"        InstructorData response \u003d (InstructorData) r.getOutput();","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedInstructor.getName(), response.getName());","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedInstructor.getEmail(), response.getEmail());","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"BunnyHoppp"},"content":"        verifySpecifiedTasksAdded(Const.TaskQueue.SEARCH_INDEXING_QUEUE_NAME, 1);","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"BunnyHoppp"},"content":"        TaskWrapper taskAdded \u003d mockTaskQueuer.getTasksAdded().get(0);","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(typicalCourse.getId(), taskAdded.getParamMap().get(Const.ParamsNames.COURSE_ID));","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedInstructor.getEmail(), taskAdded.getParamMap().get(Const.ParamsNames.INSTRUCTOR_EMAIL));","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"BunnyHoppp"},"content":"        verify(mockLogic, times(1))","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"BunnyHoppp"},"content":"                .updateToEnsureValidityOfInstructorsForTheCourse(typicalCourse.getId(), updatedInstructor);","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_invalidEmail_throwsInvalidHttpRequestBodyException() throws Exception {","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"BunnyHoppp"},"content":"        String instructorToUpdateId \u003d typicalInstructorToUpdate.getGoogleId();","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"BunnyHoppp"},"content":"        String instructorToUpdateDisplayName \u003d typicalInstructorToUpdate.getDisplayName();","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(instructorToUpdateId);","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorName \u003d \"New Instructor\";","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"BunnyHoppp"},"content":"        String invalidEmail \u003d \"invalidemail.com\";","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorRole \u003d Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER;","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"BunnyHoppp"},"content":"        InstructorCreateRequest requestBody \u003d new InstructorCreateRequest(instructorToUpdateId, updatedInstructorName,","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"BunnyHoppp"},"content":"                invalidEmail, updatedInstructorRole,","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"BunnyHoppp"},"content":"                instructorToUpdateDisplayName, typicalInstructorToUpdate.isDisplayedToStudents());","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.updateInstructorCascade(any(String.class), any(InstructorCreateRequest.class)))","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"BunnyHoppp"},"content":"                .thenThrow(InvalidParametersException.class);","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpRequestBodyFailure(requestBody, params);","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"BunnyHoppp"},"content":"        verifyNoTasksAdded();","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_noInstructorDisplayed_throwsInvalidOperationException() throws Exception {","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"BunnyHoppp"},"content":"        String instructorToUpdateId \u003d typicalInstructorToUpdate.getGoogleId();","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(instructorToUpdateId);","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorName \u003d \"New Instructor\";","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorEmail \u003d \"newinstructor@teammates.tmt\";","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorRole \u003d Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER;","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"BunnyHoppp"},"content":"        InstructorCreateRequest requestBody \u003d new InstructorCreateRequest(instructorToUpdateId, updatedInstructorName,","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"BunnyHoppp"},"content":"                updatedInstructorEmail, updatedInstructorRole,","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"BunnyHoppp"},"content":"                null, false);","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.updateInstructorCascade(any(String.class), any(InstructorCreateRequest.class)))","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"BunnyHoppp"},"content":"                .thenThrow(InstructorUpdateException.class);","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"BunnyHoppp"},"content":"        verifyInvalidOperation(requestBody, params);","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"BunnyHoppp"},"content":"        verifyNoTasksAdded();","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_adminToMasqueradeAsInstructor_success() throws Exception {","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"BunnyHoppp"},"content":"        String instructorToUpdateId \u003d typicalInstructorToUpdate.getGoogleId();","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"BunnyHoppp"},"content":"        String instructorToUpdateDisplayName \u003d typicalInstructorToUpdate.getDisplayName();","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorName \u003d \"New Instructor\";","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorEmail \u003d \"newinstructor@teammates.tmt\";","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorRole \u003d Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER;","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"BunnyHoppp"},"content":"        Instructor updatedInstructor \u003d new Instructor(typicalCourse, updatedInstructorName, updatedInstructorEmail,","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"BunnyHoppp"},"content":"                false, null, getEnum(updatedInstructorRole),","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"BunnyHoppp"},"content":"                new InstructorPrivileges(updatedInstructorRole));","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"BunnyHoppp"},"content":"        InstructorCreateRequest requestBody \u003d new InstructorCreateRequest(instructorToUpdateId, updatedInstructorName,","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"BunnyHoppp"},"content":"                updatedInstructorEmail, updatedInstructorRole,","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"BunnyHoppp"},"content":"                instructorToUpdateDisplayName, true);","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.updateInstructorCascade(any(String.class), any(InstructorCreateRequest.class)))","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(updatedInstructor);","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"BunnyHoppp"},"content":"        UpdateInstructorAction updateInstructorAction \u003d getAction(requestBody, params);","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"BunnyHoppp"},"content":"        JsonResult r \u003d getJsonResult(updateInstructorAction);","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"BunnyHoppp"},"content":"        InstructorData response \u003d (InstructorData) r.getOutput();","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedInstructor.getName(), response.getName());","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedInstructor.getEmail(), response.getEmail());","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"BunnyHoppp"},"content":"        verifySpecifiedTasksAdded(Const.TaskQueue.SEARCH_INDEXING_QUEUE_NAME, 1);","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"BunnyHoppp"},"content":"        TaskWrapper taskAdded \u003d mockTaskQueuer.getTasksAdded().get(0);","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(typicalCourse.getId(), taskAdded.getParamMap().get(Const.ParamsNames.COURSE_ID));","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"BunnyHoppp"},"content":"        assertEquals(updatedInstructor.getEmail(), taskAdded.getParamMap().get(Const.ParamsNames.INSTRUCTOR_EMAIL));","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"BunnyHoppp"},"content":"        verify(mockLogic, times(1))","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"BunnyHoppp"},"content":"                .updateToEnsureValidityOfInstructorsForTheCourse(typicalCourse.getId(), updatedInstructor);","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_nullHttpParameters_throwsInvalidHttpParameterException() {","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, null,","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpParameterFailure(params);","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"BunnyHoppp"},"content":"        verifyNoTasksAdded();","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"BunnyHoppp"},"content":"    void testExecute_nullInstructorEmail_throwsInvalidHttpRequestBodyException() throws Exception {","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"BunnyHoppp"},"content":"        String instructorToUpdateId \u003d typicalInstructorToUpdate.getGoogleId();","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"BunnyHoppp"},"content":"        String instructorToUpdateDisplayName \u003d typicalInstructorToUpdate.getDisplayName();","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(instructorToUpdateId);","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorName \u003d \"New Instructor\";","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"BunnyHoppp"},"content":"        String updatedInstructorRole \u003d Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER;","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"BunnyHoppp"},"content":"        InstructorCreateRequest requestBody \u003d new InstructorCreateRequest(instructorToUpdateId, updatedInstructorName,","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"BunnyHoppp"},"content":"                null, updatedInstructorRole,","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"BunnyHoppp"},"content":"                instructorToUpdateDisplayName, typicalInstructorToUpdate.isDisplayedToStudents());","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.updateInstructorCascade(any(String.class), any(InstructorCreateRequest.class)))","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"BunnyHoppp"},"content":"                .thenThrow(InvalidParametersException.class);","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"BunnyHoppp"},"content":"        verifyHttpRequestBodyFailure(requestBody, params);","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"BunnyHoppp"},"content":"        verifyNoTasksAdded();","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"BunnyHoppp"},"content":"    void testAccessControl_noLogin_cannotAccess() {","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"BunnyHoppp"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"BunnyHoppp"},"content":"    void testAccessControl_unregisteredUsers_cannotAccess() {","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsUnregistered(\"unregistered user\");","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"BunnyHoppp"},"content":"    void testAccessControl_students_cannotAccess() {","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"BunnyHoppp"},"content":"        Student typicalStudent \u003d getTypicalStudent();","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsStudent(typicalStudent.getGoogleId());","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"BunnyHoppp"},"content":"    void testAccessControl_instructorsFromDifferentCourse_cannotAccess() {","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"BunnyHoppp"},"content":"        Course differentCourse \u003d new Course(\"different id\", \"different name\", Const.DEFAULT_TIME_ZONE,","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"BunnyHoppp"},"content":"                \"teammates\");","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"BunnyHoppp"},"content":"        Instructor instructorFromDifferentCourse \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"BunnyHoppp"},"content":"        instructorFromDifferentCourse.setCourse(differentCourse);","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"BunnyHoppp"},"content":"        instructorFromDifferentCourse.setGoogleId(\"different google id\");","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getCourse(typicalCourse.getId())).thenReturn(typicalCourse);","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getInstructorByGoogleId(differentCourse.getId(), instructorFromDifferentCourse.getGoogleId()))","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(instructorFromDifferentCourse);","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(instructorFromDifferentCourse.getGoogleId());","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"BunnyHoppp"},"content":"    @Test","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"BunnyHoppp"},"content":"    void testAccessControl_instructorWithoutCorrectCoursePrivilege_cannotAccess() {","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"BunnyHoppp"},"content":"        Instructor instructorWithoutCorrectPrivilege \u003d getTypicalInstructor();","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"BunnyHoppp"},"content":"        instructorWithoutCorrectPrivilege.setGoogleId(\"no privilege\");","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"BunnyHoppp"},"content":"        instructorWithoutCorrectPrivilege.setEmail(\"helper@teammates.tmt\");","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"BunnyHoppp"},"content":"        instructorWithoutCorrectPrivilege.setPrivileges(new InstructorPrivileges(INSTRUCTOR_PERMISSION_ROLE_CUSTOM));","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"BunnyHoppp"},"content":"        String[] params \u003d new String[] {","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"BunnyHoppp"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse.getId(),","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"BunnyHoppp"},"content":"        };","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getCourse(typicalCourse.getId())).thenReturn(typicalCourse);","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"BunnyHoppp"},"content":"        when(mockLogic.getInstructorByGoogleId(typicalCourse.getId(), instructorWithoutCorrectPrivilege.getGoogleId()))","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"BunnyHoppp"},"content":"                .thenReturn(instructorWithoutCorrectPrivilege);","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"BunnyHoppp"},"content":"        loginAsInstructor(instructorWithoutCorrectPrivilege.getGoogleId());","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"BunnyHoppp"},"content":"        verifyCannotAccess(params);","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"BunnyHoppp"},"content":"    }","isFullCredit":false},{"lineNumber":295,"author":{"gitId":"BunnyHoppp"},"content":"","isFullCredit":false},{"lineNumber":296,"author":{"gitId":"BunnyHoppp"},"content":"}","isFullCredit":false}],"authorContributionMap":{"BunnyHoppp":296}},{"path":"src/test/java/teammates/sqlui/webapi/UpdateNotificationActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"InfinityTwo"},"content":"package teammates.sqlui.webapi;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"InfinityTwo"},"content":"import static org.mockito.Mockito.when;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"InfinityTwo"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"InfinityTwo"},"content":"import java.time.temporal.ChronoUnit;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"InfinityTwo"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.BeforeMethod;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"InfinityTwo"},"content":"import org.testng.annotations.Test;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.datatransfer.NotificationStyle;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.datatransfer.NotificationTargetUser;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.exception.InvalidParametersException;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.Notification;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.output.NotificationData;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.request.NotificationUpdateRequest;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.InvalidHttpParameterException;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"InfinityTwo"},"content":"import teammates.ui.webapi.UpdateNotificationAction;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"InfinityTwo"},"content":"/**","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"InfinityTwo"},"content":" * SUT: {@link UpdateNotificationAction}.","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":" */","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"InfinityTwo"},"content":"public class UpdateNotificationActionTest extends BaseActionTest\u003cUpdateNotificationAction\u003e {","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"InfinityTwo"},"content":"    private Notification testNotification;","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"InfinityTwo"},"content":"    private Notification newNotification;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"InfinityTwo"},"content":"    private NotificationUpdateRequest notificationRequest;","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"InfinityTwo"},"content":"    private String[] requestParams;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"InfinityTwo"},"content":"    String getActionUri() {","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"InfinityTwo"},"content":"        return Const.ResourceURIs.NOTIFICATION;","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"InfinityTwo"},"content":"    @Override","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"InfinityTwo"},"content":"    String getRequestMethod() {","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"InfinityTwo"},"content":"        return PUT;","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"InfinityTwo"},"content":"    @BeforeMethod","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"InfinityTwo"},"content":"    void setUp() {","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest \u003d getTypicalUpdateRequest();","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"        testNotification \u003d getTypicalNotificationWithId();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"InfinityTwo"},"content":"        newNotification \u003d new Notification(","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"InfinityTwo"},"content":"                Instant.ofEpochMilli(notificationRequest.getStartTimestamp()),","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"InfinityTwo"},"content":"                Instant.ofEpochMilli(notificationRequest.getEndTimestamp()),","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"InfinityTwo"},"content":"                notificationRequest.getStyle(),","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"InfinityTwo"},"content":"                notificationRequest.getTargetUser(),","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"InfinityTwo"},"content":"                notificationRequest.getTitle(),","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"InfinityTwo"},"content":"                notificationRequest.getMessage());","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"InfinityTwo"},"content":"        newNotification.setId(testNotification.getId());","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"InfinityTwo"},"content":"        requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_ID, testNotification.getId().toString(),","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"InfinityTwo"},"content":"        loginAsAdmin();","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_admin_canAccess() {","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"InfinityTwo"},"content":"        verifyCanAccess();","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_maintainers_cannotAccess() {","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"InfinityTwo"},"content":"        loginAsMaintainer();","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_instructor_cannotAccess() {","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"InfinityTwo"},"content":"        loginAsInstructor(Const.ParamsNames.INSTRUCTOR_ID);","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_student_cannotAccess() {","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"InfinityTwo"},"content":"        loginAsStudent(Const.ParamsNames.STUDENT_ID);","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_loggedOut_cannotAccess() {","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"InfinityTwo"},"content":"    void testAccessControl_unregistered_cannotAccess() {","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"InfinityTwo"},"content":"        logoutUser();","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"InfinityTwo"},"content":"        loginAsUnregistered(Const.ParamsNames.USER_ID);","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"InfinityTwo"},"content":"        verifyCannotAccess();","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_typicalCase_shouldSucceed() throws Exception {","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"InfinityTwo"},"content":"        NotificationStyle style \u003d notificationRequest.getStyle();","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"InfinityTwo"},"content":"        NotificationTargetUser targetUser \u003d notificationRequest.getTargetUser();","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"InfinityTwo"},"content":"        String title \u003d notificationRequest.getTitle();","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"InfinityTwo"},"content":"        String message \u003d notificationRequest.getMessage();","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"InfinityTwo"},"content":"        newNotification.setId(testNotification.getId());","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getNotification(testNotification.getId())).thenReturn(testNotification);","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.updateNotification(","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"InfinityTwo"},"content":"                testNotification.getId(),","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getStartTime(),","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getEndTime(),","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getStyle(),","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getTargetUser(),","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getTitle(),","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getMessage()","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"InfinityTwo"},"content":"        )).thenReturn(newNotification);","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"InfinityTwo"},"content":"        UpdateNotificationAction action \u003d getAction(notificationRequest, requestParams);","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"InfinityTwo"},"content":"        NotificationData res \u003d (NotificationData) action.execute().getOutput();","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getNotification(testNotification.getId())).thenReturn(newNotification);","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"InfinityTwo"},"content":"        Notification updatedNotification \u003d mockLogic.getNotification(UUID.fromString(res.getNotificationId()));","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"InfinityTwo"},"content":"        // Verify that correctly updated in the DB","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(notificationRequest.getStartTimestamp(), updatedNotification.getStartTime().toEpochMilli());","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(notificationRequest.getEndTimestamp(), updatedNotification.getEndTime().toEpochMilli());","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(style, updatedNotification.getStyle());","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(targetUser, updatedNotification.getTargetUser());","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(title, updatedNotification.getTitle());","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(message, updatedNotification.getMessage());","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_nullStyle_shouldFail() {","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest.setStyle(null);","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(notificationRequest, requestParams);","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification style cannot be null\", ex.getMessage());","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_nullTargetUser_shouldFail() {","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest.setTargetUser(null);","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(notificationRequest, requestParams);","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification target user cannot be null\", ex.getMessage());","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_nullTitle_shouldFail() {","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest.setTitle(null);","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(notificationRequest, requestParams);","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification title cannot be null\", ex.getMessage());","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_nullMessage_shouldFail() {","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest.setMessage(null);","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(notificationRequest, requestParams);","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Notification message cannot be null\", ex.getMessage());","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_invalidNotificationId_shouldFail() {","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"InfinityTwo"},"content":"        String invalidNotificationId \u003d \"InvalidNotificationId\";","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"InfinityTwo"},"content":"        requestParams \u003d new String[] {","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"InfinityTwo"},"content":"                Const.ParamsNames.NOTIFICATION_ID, invalidNotificationId,","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"InfinityTwo"},"content":"        };","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpParameterException ex \u003d verifyHttpParameterFailure(notificationRequest, requestParams);","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Expected UUID value for notificationid parameter, but found: [\"","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"InfinityTwo"},"content":"                + invalidNotificationId","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"InfinityTwo"},"content":"                + \"]\", ex.getMessage());","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_timestampStartLessThanZero_shouldFail() {","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest.setStartTimestamp(-1);","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(notificationRequest, requestParams);","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"Start timestamp should be greater than zero\", ex.getMessage());","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_timestampEndLessThanZero_shouldFail() {","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest.setEndTimestamp(-1);","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(notificationRequest, requestParams);","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"End timestamp should be greater than zero\", ex.getMessage());","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_timestampStartAfterEnd_shouldFail() throws Exception {","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest \u003d getTypicalUpdateRequest();","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest.setEndTimestamp(notificationRequest.getStartTimestamp() - 100);","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"InfinityTwo"},"content":"        newNotification \u003d new Notification(","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"InfinityTwo"},"content":"                Instant.ofEpochMilli(notificationRequest.getStartTimestamp()),","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"InfinityTwo"},"content":"                Instant.ofEpochMilli(notificationRequest.getEndTimestamp()),","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"InfinityTwo"},"content":"                notificationRequest.getStyle(),","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"InfinityTwo"},"content":"                notificationRequest.getTargetUser(),","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"InfinityTwo"},"content":"                notificationRequest.getTitle(),","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"InfinityTwo"},"content":"                notificationRequest.getMessage());","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"InfinityTwo"},"content":"        newNotification.setId(testNotification.getId());","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.getNotification(testNotification.getId())).thenReturn(testNotification);","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"InfinityTwo"},"content":"        when(mockLogic.updateNotification(","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"InfinityTwo"},"content":"                testNotification.getId(),","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getStartTime(),","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getEndTime(),","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getStyle(),","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getTargetUser(),","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getTitle(),","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"InfinityTwo"},"content":"                newNotification.getMessage()","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"InfinityTwo"},"content":"        )).thenThrow(new InvalidParametersException(\"The time when the notification will expire for this notification \"","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"InfinityTwo"},"content":"                + \"cannot be earlier than the time when the notification will be visible.\"));","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"InfinityTwo"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(notificationRequest, requestParams);","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"InfinityTwo"},"content":"        assertEquals(\"The time when the notification will expire for this notification \"","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"InfinityTwo"},"content":"                + \"cannot be earlier than the time when the notification will be visible.\",","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"InfinityTwo"},"content":"                ex.getMessage());","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_invalidParameter_shouldFail() {","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"InfinityTwo"},"content":"        notificationRequest.setTitle(\" \");","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(notificationRequest);","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"InfinityTwo"},"content":"    @Test","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"InfinityTwo"},"content":"    protected void testExecute_notEnoughRequestParameters_shouldFail() {","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"InfinityTwo"},"content":"        verifyHttpParameterFailure(notificationRequest);","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"InfinityTwo"},"content":"    private NotificationUpdateRequest getTypicalUpdateRequest() {","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"InfinityTwo"},"content":"        NotificationUpdateRequest req \u003d new NotificationUpdateRequest();","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"InfinityTwo"},"content":"        req.setStartTimestamp(Instant.now().toEpochMilli());","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"InfinityTwo"},"content":"        req.setEndTimestamp(Instant.now().plus(5, ChronoUnit.DAYS).toEpochMilli());","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"InfinityTwo"},"content":"        req.setStyle(NotificationStyle.INFO);","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"InfinityTwo"},"content":"        req.setTargetUser(NotificationTargetUser.GENERAL);","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"InfinityTwo"},"content":"        req.setTitle(\"New notification title\");","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"InfinityTwo"},"content":"        req.setMessage(\"New notification message\");","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"InfinityTwo"},"content":"        return req;","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"InfinityTwo"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":247}},{"path":"src/test/java/teammates/test/BaseTestCase.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.test;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.io.IOException;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.lang.reflect.Method;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.time.Duration;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.time.Instant;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.ArrayList;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.HashMap;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.Map;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.UUID;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"import org.junit.jupiter.api.Assertions;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"import org.junit.jupiter.api.function.Executable;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterClass;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeClass;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.AccountRequestStatus;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.DataBundle;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPrivileges;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationStyle;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationTargetUser;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SqlDataBundle;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"InfinityTwo"},"content":"import teammates.common.datatransfer.attributes.UsageStatisticsAttributes;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackResponseDetails;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.common.util.JsonUtils;","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.common.util.TimeHelperExtension;","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.DataBundleLogic;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.AccountRequest;","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackResponse;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackResponseComment;","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackSession;","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Instructor;","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Notification;","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Student;","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Team;","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"InfinityTwo"},"content":"import teammates.storage.sqlentity.UsageStatistics;","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":" * Base class for all test cases.","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"@SuppressWarnings(\"PMD.TestClassWithoutTestCases\")","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"public class BaseTestCase {","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"    /**","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"     * Test Segment divider. Used to divide a test case into logical sections.","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"     * The weird name is for easy spotting.","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"     *","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"     * @param description","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"     *            of the logical section. This will be printed.","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"     */","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    // CHECKSTYLE.OFF:AbbreviationAsWordInName|MethodName the weird name is for easy spotting.","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    public static void ______TS(String description) {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        print(\" * \" + description);","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"    // CHECKSTYLE.ON:AbbreviationAsWordInName|MethodName","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"    @BeforeClass","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"    public void printTestClassHeader() {","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"        print(\"[\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\"","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"                + getClass().getCanonicalName()","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"                + \"\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d]\");","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"    @AfterClass","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"    public void printTestClassFooter() {","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"        print(getClass().getCanonicalName() + \" completed\");","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"    protected static void print(String message) {","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"        System.out.println(message);","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"    protected String getTestDataFolder() {","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"        return TestProperties.TEST_DATA_FOLDER;","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"    /**","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"     * Creates a DataBundle as specified in typicalDataBundle.json.","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"     */","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"    protected DataBundle getTypicalDataBundle() {","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"        return loadDataBundle(\"/typicalDataBundle.json\");","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"    protected DataBundle loadDataBundle(String jsonFileName) {","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"        try {","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"            String pathToJsonFile \u003d getTestDataFolder() + jsonFileName;","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"            String jsonString \u003d FileHelper.readFile(pathToJsonFile);","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"            return JsonUtils.fromJson(jsonString, DataBundle.class);","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"        } catch (IOException e) {","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"            throw new RuntimeException(e);","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"    protected SqlDataBundle getTypicalSqlDataBundle() {","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"        return loadSqlDataBundle(\"/typicalDataBundle.json\");","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"    protected SqlDataBundle loadSqlDataBundle(String jsonFileName) {","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"        try {","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"            // TODO: rename to loadDataBundle after migration","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"            String pathToJsonFile \u003d getTestDataFolder() + jsonFileName;","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"            String jsonString \u003d FileHelper.readFile(pathToJsonFile);","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"            return DataBundleLogic.deserializeDataBundle(jsonString);","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"        } catch (IOException e) {","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"            throw new RuntimeException(e);","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"    /**","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"     * These getTypicalX functions are used to generate typical entities for tests.","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"     * The entity fields can be changed using setter methods if needed.","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"     * New entity generator functions for tests should be added here, and follow the","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"     * same naming convention.","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"     *","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"     * \u003cp\u003eExample usage:","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"     * Account account \u003d getTypicalAccount();","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"     * Student student \u003d getTypicalStudent();","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"     * account.setEmail(\"newemail@teammates.com\");","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"     * student.setName(\"New Student Name\");","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"     */","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"    protected Account getTypicalAccount() {","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"        return new Account(\"google-id\", \"name\", \"email@teammates.com\");","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"    protected Notification getTypicalNotificationWithId() {","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"        Notification notification \u003d new Notification(Instant.parse(\"2011-01-01T00:00:00Z\"),","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"                \"A deprecation note\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"        notification.setId(UUID.randomUUID());","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"        return notification;","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"    protected Instructor getTypicalInstructor() {","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"        Course course \u003d getTypicalCourse();","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"        InstructorPrivileges instructorPrivileges \u003d","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"                new InstructorPrivileges(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"        InstructorPermissionRole role \u003d InstructorPermissionRole","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"                .getEnum(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"        return new Instructor(course, \"instructor-name\", \"valid@teammates.tmt\",","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"                false, Const.DEFAULT_DISPLAY_NAME_FOR_INSTRUCTOR, role, instructorPrivileges);","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"    protected Course getTypicalCourse() {","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"        return new Course(\"course-id\", \"course-name\", Const.DEFAULT_TIME_ZONE, \"teammates\");","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"    protected Student getTypicalStudent() {","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"        Course course \u003d getTypicalCourse();","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"        return new Student(course, \"student-name\", \"validstudent@teammates.tmt\", \"comments\");","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"    protected Section getTypicalSection() {","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"        Course course \u003d getTypicalCourse();","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"        return new Section(course, \"test-section\");","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"    protected Team getTypicalTeam() {","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"        Section section \u003d getTypicalSection();","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"        return new Team(section, \"test-team\");","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"-"},"content":"    protected FeedbackSession getTypicalFeedbackSessionForCourse(Course course) {","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"-"},"content":"        Instant startTime \u003d TimeHelperExtension.getInstantDaysOffsetFromNow(1);","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"        Instant endTime \u003d TimeHelperExtension.getInstantDaysOffsetFromNow(7);","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"        return new FeedbackSession(\"test-feedbacksession\",","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"                course,","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"-"},"content":"                \"test@teammates.tmt\",","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"-"},"content":"                \"test-instructions\",","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"-"},"content":"                startTime,","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"-"},"content":"                endTime,","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"-"},"content":"                startTime,","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"-"},"content":"                endTime,","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"-"},"content":"                Duration.ofMinutes(5),","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"                false,","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"-"},"content":"                false,","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"                false);","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"-"},"content":"    protected FeedbackQuestion getTypicalFeedbackQuestionForSession(FeedbackSession session) {","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"-"},"content":"        return FeedbackQuestion.makeQuestion(session, 1, \"test-description\",","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"-"},"content":"                FeedbackParticipantType.SELF, FeedbackParticipantType.SELF, 1, new ArrayList\u003c\u003e(),","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"-"},"content":"                new ArrayList\u003c\u003e(), new ArrayList\u003c\u003e(),","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"-"},"content":"                new FeedbackTextQuestionDetails(\"test question text\"));","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"-"},"content":"    protected FeedbackResponse getTypicalFeedbackResponseForQuestion(FeedbackQuestion question) {","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"-"},"content":"        return FeedbackResponse.makeResponse(question, \"test-giver\", getTypicalSection(), \"test-recipient\",","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"                getTypicalSection(), getTypicalFeedbackResponseDetails());","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"    protected FeedbackResponseDetails getTypicalFeedbackResponseDetails() {","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"        return new FeedbackTextResponseDetails();","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"-"},"content":"    protected FeedbackResponseComment getTypicalResponseComment(Long id) {","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"-"},"content":"        FeedbackResponseComment comment \u003d new FeedbackResponseComment(null, \"\",","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"                FeedbackParticipantType.STUDENTS, null, null, \"\",","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"                false, false,","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"                null, null, null);","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"        comment.setId(id);","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"        return comment;","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"    protected AccountRequest getTypicalAccountRequest() {","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"        return new AccountRequest(\"valid@test.com\", \"Test Name\", \"TEAMMATES Test Institute 1, Test Country\",","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"                AccountRequestStatus.PENDING, \"\");","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"InfinityTwo"},"content":"    protected UsageStatisticsAttributes getTypicalUsageStatisticsAttributes() {","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"InfinityTwo"},"content":"        return getTypicalUsageStatisticsAttributes(Instant.parse(\"2011-01-01T00:00:00Z\"));","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"InfinityTwo"},"content":"    protected UsageStatisticsAttributes getTypicalUsageStatisticsAttributes(Instant startTime) {","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"InfinityTwo"},"content":"        return UsageStatisticsAttributes.builder(startTime, 60)","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"InfinityTwo"},"content":"                .withNumResponses(2)","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"InfinityTwo"},"content":"                .withNumCourses(2)","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"InfinityTwo"},"content":"                .withNumStudents(2)","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"InfinityTwo"},"content":"                .withNumInstructors(2)","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"InfinityTwo"},"content":"                .withNumAccountRequests(2)","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"InfinityTwo"},"content":"                .build();","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"InfinityTwo"},"content":"    protected UsageStatistics getTypicalUsageStatistics() {","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"InfinityTwo"},"content":"        return UsageStatistics.valueOf(getTypicalUsageStatisticsAttributes());","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"InfinityTwo"},"content":"    protected UsageStatistics getTypicalUsageStatistics(Instant startTime) {","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"InfinityTwo"},"content":"        return UsageStatistics.valueOf(getTypicalUsageStatisticsAttributes(startTime));","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"InfinityTwo"},"content":"    }","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"InfinityTwo"},"content":"","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"-"},"content":"    /**","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"-"},"content":"     * Populates the feedback question and response IDs within the data bundle.","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"-"},"content":"     *","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"-"},"content":"     * \u003cp\u003eFor tests where simulated database is used, the backend will assign the question and response IDs","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"-"},"content":"     * when the entities are persisted into the database, and modify the relation IDs accordingly.","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"-"},"content":"     * However, for tests that do not use simulated database (e.g. pure data structure tests),","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"-"},"content":"     * the assignment of IDs have to be simulated.","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"-"},"content":"     */","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"-"},"content":"    protected void populateQuestionAndResponseIds(DataBundle dataBundle) {","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"-"},"content":"        Map\u003cString, Map\u003cInteger, String\u003e\u003e sessionToQuestionNumberToId \u003d new HashMap\u003c\u003e();","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"-"},"content":"        dataBundle.feedbackQuestions.forEach((key, question) -\u003e {","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"-"},"content":"            // Assign the same ID as the key as a later function requires a match between the key and the question ID","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"-"},"content":"            question.setId(key);","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"-"},"content":"            Map\u003cInteger, String\u003e questionNumberToId \u003d sessionToQuestionNumberToId.computeIfAbsent(","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"-"},"content":"                    question.getCourseId() + \"%\" + question.getFeedbackSessionName(), k -\u003e new HashMap\u003c\u003e());","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"-"},"content":"            questionNumberToId.put(question.getQuestionNumber(), key);","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"-"},"content":"        dataBundle.feedbackResponses.forEach((key, response) -\u003e {","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"-"},"content":"            response.setId(key);","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"-"},"content":"            String feedbackQuestionId \u003d sessionToQuestionNumberToId","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"-"},"content":"                    .get(response.getCourseId() + \"%\" + response.getFeedbackSessionName())","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"-"},"content":"                    .get(Integer.valueOf(response.getFeedbackQuestionId()));","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"-"},"content":"            response.setFeedbackQuestionId(feedbackQuestionId);","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"-"},"content":"    /**","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"-"},"content":"     * Invokes the method named {@code methodName} as defined in the {@code definingClass}.","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"-"},"content":"     * @param definingClass     the class which defines the method","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"-"},"content":"     * @param parameterTypes    the parameter types of the method,","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"-"},"content":"     *                          which must be passed in the same order defined in the method","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"-"},"content":"     * @param invokingObject    the object which invokes the method, can be {@code null} if the method is static","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"-"},"content":"     * @param args              the arguments to be passed to the method invocation","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"-"},"content":"     */","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"-"},"content":"    protected static Object invokeMethod(Class\u003c?\u003e definingClass, String methodName, Class\u003c?\u003e[] parameterTypes,","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"-"},"content":"                                         Object invokingObject, Object[] args)","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"-"},"content":"            throws ReflectiveOperationException {","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"-"},"content":"        Method method \u003d definingClass.getDeclaredMethod(methodName, parameterTypes);","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"-"},"content":"        method.setAccessible(true);","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"-"},"content":"        return method.invoke(invokingObject, args);","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"-"},"content":"    protected static String getPopulatedErrorMessage(String messageTemplate, String userInput,","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"-"},"content":"                                                     String fieldName, String errorReason)","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"-"},"content":"            throws ReflectiveOperationException {","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"-"},"content":"        return getPopulatedErrorMessage(messageTemplate, userInput, fieldName, errorReason, 0);","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"-"},"content":"    protected static String getPopulatedErrorMessage(String messageTemplate, String userInput,","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"-"},"content":"                                                     String fieldName, String errorReason, int maxLength)","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"-"},"content":"            throws ReflectiveOperationException {","isFullCredit":false},{"lineNumber":295,"author":{"gitId":"-"},"content":"        return (String) invokeMethod(FieldValidator.class, \"getPopulatedErrorMessage\",","isFullCredit":false},{"lineNumber":296,"author":{"gitId":"-"},"content":"                                     new Class\u003c?\u003e[] { String.class, String.class, String.class, String.class, int.class },","isFullCredit":false},{"lineNumber":297,"author":{"gitId":"-"},"content":"                                     null, new Object[] { messageTemplate, userInput, fieldName, errorReason, maxLength });","isFullCredit":false},{"lineNumber":298,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":299,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":300,"author":{"gitId":"-"},"content":"    protected static String getPopulatedEmptyStringErrorMessage(String messageTemplate, String fieldName, int maxLength)","isFullCredit":false},{"lineNumber":301,"author":{"gitId":"-"},"content":"            throws ReflectiveOperationException {","isFullCredit":false},{"lineNumber":302,"author":{"gitId":"-"},"content":"        return (String) invokeMethod(FieldValidator.class, \"getPopulatedEmptyStringErrorMessage\",","isFullCredit":false},{"lineNumber":303,"author":{"gitId":"-"},"content":"                new Class\u003c?\u003e[] { String.class, String.class, int.class },","isFullCredit":false},{"lineNumber":304,"author":{"gitId":"-"},"content":"                null, new Object[] { messageTemplate, fieldName, maxLength });","isFullCredit":false},{"lineNumber":305,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":306,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":307,"author":{"gitId":"-"},"content":"    /*","isFullCredit":false},{"lineNumber":308,"author":{"gitId":"-"},"content":"     * Here are some of the most common assertion methods provided by JUnit.","isFullCredit":false},{"lineNumber":309,"author":{"gitId":"-"},"content":"     * They are copied here to prevent repetitive importing in test classes.","isFullCredit":false},{"lineNumber":310,"author":{"gitId":"-"},"content":"     */","isFullCredit":false},{"lineNumber":311,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":312,"author":{"gitId":"-"},"content":"    protected static void assertTrue(boolean condition) {","isFullCredit":false},{"lineNumber":313,"author":{"gitId":"-"},"content":"        Assertions.assertTrue(condition);","isFullCredit":false},{"lineNumber":314,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":315,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":316,"author":{"gitId":"-"},"content":"    protected static void assertTrue(String message, boolean condition) {","isFullCredit":false},{"lineNumber":317,"author":{"gitId":"-"},"content":"        Assertions.assertTrue(condition, message);","isFullCredit":false},{"lineNumber":318,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":319,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":320,"author":{"gitId":"-"},"content":"    protected static void assertFalse(boolean condition) {","isFullCredit":false},{"lineNumber":321,"author":{"gitId":"-"},"content":"        Assertions.assertFalse(condition);","isFullCredit":false},{"lineNumber":322,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":323,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":324,"author":{"gitId":"-"},"content":"    protected static void assertFalse(String message, boolean condition) {","isFullCredit":false},{"lineNumber":325,"author":{"gitId":"-"},"content":"        Assertions.assertFalse(condition, message);","isFullCredit":false},{"lineNumber":326,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":327,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":328,"author":{"gitId":"-"},"content":"    protected static void assertEquals(int expected, int actual) {","isFullCredit":false},{"lineNumber":329,"author":{"gitId":"-"},"content":"        Assertions.assertEquals(expected, actual);","isFullCredit":false},{"lineNumber":330,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":331,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":332,"author":{"gitId":"-"},"content":"    protected static void assertEquals(String message, int expected, int actual) {","isFullCredit":false},{"lineNumber":333,"author":{"gitId":"-"},"content":"        Assertions.assertEquals(expected, actual, message);","isFullCredit":false},{"lineNumber":334,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":335,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":336,"author":{"gitId":"-"},"content":"    protected static void assertEquals(long expected, long actual) {","isFullCredit":false},{"lineNumber":337,"author":{"gitId":"-"},"content":"        Assertions.assertEquals(expected, actual);","isFullCredit":false},{"lineNumber":338,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":339,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":340,"author":{"gitId":"-"},"content":"    protected static void assertEquals(double expected, double actual, double delta) {","isFullCredit":false},{"lineNumber":341,"author":{"gitId":"-"},"content":"        Assertions.assertEquals(expected, actual, delta);","isFullCredit":false},{"lineNumber":342,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":343,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":344,"author":{"gitId":"-"},"content":"    protected static void assertEquals(Object expected, Object actual) {","isFullCredit":false},{"lineNumber":345,"author":{"gitId":"-"},"content":"        Assertions.assertEquals(expected, actual);","isFullCredit":false},{"lineNumber":346,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":347,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":348,"author":{"gitId":"-"},"content":"    protected static void assertEquals(String message, Object expected, Object actual) {","isFullCredit":false},{"lineNumber":349,"author":{"gitId":"-"},"content":"        Assertions.assertEquals(expected, actual, message);","isFullCredit":false},{"lineNumber":350,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":351,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":352,"author":{"gitId":"-"},"content":"    protected static void assertArrayEquals(byte[] expected, byte[] actual) {","isFullCredit":false},{"lineNumber":353,"author":{"gitId":"-"},"content":"        Assertions.assertArrayEquals(expected, actual);","isFullCredit":false},{"lineNumber":354,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":355,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":356,"author":{"gitId":"-"},"content":"    protected static void assertNotEquals(Object first, Object second) {","isFullCredit":false},{"lineNumber":357,"author":{"gitId":"-"},"content":"        Assertions.assertNotEquals(first, second);","isFullCredit":false},{"lineNumber":358,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":359,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":360,"author":{"gitId":"-"},"content":"    protected static void assertSame(Object expected, Object actual) {","isFullCredit":false},{"lineNumber":361,"author":{"gitId":"-"},"content":"        Assertions.assertSame(expected, actual);","isFullCredit":false},{"lineNumber":362,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":363,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":364,"author":{"gitId":"-"},"content":"    protected static void assertNotSame(Object unexpected, Object actual) {","isFullCredit":false},{"lineNumber":365,"author":{"gitId":"-"},"content":"        Assertions.assertNotSame(unexpected, actual);","isFullCredit":false},{"lineNumber":366,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":367,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":368,"author":{"gitId":"-"},"content":"    protected static void assertNull(Object object) {","isFullCredit":false},{"lineNumber":369,"author":{"gitId":"-"},"content":"        Assertions.assertNull(object);","isFullCredit":false},{"lineNumber":370,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":371,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":372,"author":{"gitId":"-"},"content":"    protected static void assertNull(String message, Object object) {","isFullCredit":false},{"lineNumber":373,"author":{"gitId":"-"},"content":"        Assertions.assertNull(object, message);","isFullCredit":false},{"lineNumber":374,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":375,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":376,"author":{"gitId":"-"},"content":"    protected static void assertNotNull(Object object) {","isFullCredit":false},{"lineNumber":377,"author":{"gitId":"-"},"content":"        Assertions.assertNotNull(object);","isFullCredit":false},{"lineNumber":378,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":379,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":380,"author":{"gitId":"-"},"content":"    protected static void assertNotNull(String message, Object object) {","isFullCredit":false},{"lineNumber":381,"author":{"gitId":"-"},"content":"        Assertions.assertNotNull(object, message);","isFullCredit":false},{"lineNumber":382,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":383,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":384,"author":{"gitId":"-"},"content":"    protected static void fail(String message) {","isFullCredit":false},{"lineNumber":385,"author":{"gitId":"-"},"content":"        Assertions.fail(message);","isFullCredit":false},{"lineNumber":386,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":387,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":388,"author":{"gitId":"-"},"content":"    protected static \u003cT extends Throwable\u003e T assertThrows(Class\u003cT\u003e expectedType, Executable executable) {","isFullCredit":false},{"lineNumber":389,"author":{"gitId":"-"},"content":"        return Assertions.assertThrows(expectedType, executable);","isFullCredit":false},{"lineNumber":390,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":391,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":392,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"InfinityTwo":24,"-":368}}]
